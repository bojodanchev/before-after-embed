import{r as ie,j as d,c as Ea,R as Sa}from"./index-ALIgTd_Z.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ia=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Ui=i=>{const e=Ia(i);return e.charAt(0).toUpperCase()+e.slice(1)},nn=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),ja=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Na={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ie.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:n,iconNode:a,...o},l)=>ie.createElement("svg",{ref:l,...Na,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:nn("lucide",r),...!n&&!ja(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>ie.createElement(c,u)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(i,e)=>{const t=ie.forwardRef(({className:s,...r},n)=>ie.createElement(Pa,{ref:n,iconNode:e,className:nn(`lucide-${$a(Ui(i))}`,`lucide-${i}`,s),...r}));return t.displayName=Ui(i),t};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ss=Ie("arrow-right",Ca);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wt=Ie("check",Fa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Aa=Ie("code-xml",Ra);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Ma=Ie("gauge",Ta);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],an=Ie("image",Oa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Da=Ie("layers",La);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]],zi=Ie("paintbrush",Ha);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gi=Ie("shield",Ba);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ua=Ie("sparkles",qa);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Ga=Ie("terminal",za);var f=typeof window<"u"?window:void 0,Q=typeof globalThis<"u"?globalThis:f,on=Array.prototype,Wi=on.forEach,Vi=on.indexOf,re=Q==null?void 0:Q.navigator,w=Q==null?void 0:Q.document,Z=Q==null?void 0:Q.location,Xs=Q==null?void 0:Q.fetch,Js=Q!=null&&Q.XMLHttpRequest&&"withCredentials"in new Q.XMLHttpRequest?Q.XMLHttpRequest:void 0,Yi=Q==null?void 0:Q.AbortController,K=re==null?void 0:re.userAgent,E=f??{},Te={DEBUG:!1,LIB_VERSION:"1.266.0"};function y(){return y=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},y.apply(null,arguments)}function ln(i,e){if(i==null)return{};var t={};for(var s in i)if({}.hasOwnProperty.call(i,s)){if(e.indexOf(s)!==-1)continue;t[s]=i[s]}return t}var Wa=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function j(i,e){return i.indexOf(e)!==-1}var ws=function(i){return i.trim()},Ks=function(i){return i.replace(/^\$/,"")},Va=Array.isArray,cn=Object.prototype,un=cn.hasOwnProperty,xs=cn.toString,A=Va||function(i){return xs.call(i)==="[object Array]"},le=i=>typeof i=="function",L=i=>i===Object(i)&&!A(i),dt=i=>{if(L(i)){for(var e in i)if(un.call(i,e))return!1;return!0}return!1},m=i=>i===void 0,D=i=>xs.call(i)=="[object String]",Zs=i=>D(i)&&i.trim().length===0,Ye=i=>i===null,C=i=>m(i)||Ye(i),V=i=>xs.call(i)=="[object Number]",xe=i=>xs.call(i)==="[object Boolean]",Ya=i=>i instanceof FormData,Xa=i=>j(Wa,i),Ja=[!0,"true",1,"1","yes"],Cs=i=>j(Ja,i),Ka=[!1,"false",0,"0","no"];function ne(i,e,t,s,r){return e>t&&(s.warn("min cannot be greater than max."),e=t),V(i)?i>t?(s.warn(" cannot be  greater than max: "+t+". Using max value instead."),t):i<e?(s.warn(" cannot be less than min: "+e+". Using min value instead."),e):i:(s.warn(" must be a number. using max or fallback. max: "+t+", fallback: "+r),ne(r||t,e,t,s))}class dn{stop(){this.t&&(clearInterval(this.t),this.t=void 0)}constructor(e){this.i=e,this.o={},this.h=()=>{Object.keys(this.o).forEach(t=>{var s=this.m(t)+this.S;s>=this.$?delete this.o[t]:this.k(t,s)})},this.m=t=>this.o[String(t)],this.k=(t,s)=>{this.o[String(t)]=s},this.consumeRateLimit=t=>{var s,r=(s=this.m(t))!=null?s:this.$;if((r=Math.max(r-1,0))===0)return!0;this.k(t,r);var n,a=r===0;return a&&((n=this.I)==null||n.call(this,t)),a},this.I=this.i.I,this.$=ne(this.i.bucketSize,0,100,this.i.P),this.S=ne(this.i.refillRate,0,this.$,this.i.P),this.R=ne(this.i.refillInterval,0,864e5,this.i.P),this.t=setInterval(()=>{this.h()},this.R)}}var hn=i=>{var e={T:function(t){if(f&&(Te.DEBUG||E.POSTHOG_DEBUG)&&!m(f.console)&&f.console){for(var s=("__rrweb_original__"in f.console[t])?f.console[t].__rrweb_original__:f.console[t],r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];s(i,...n)}},info:function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];e.T("log",...s)},warn:function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];e.T("warn",...s)},error:function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];e.T("error",...s)},critical:function(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];console.error(i,...s)},uninitializedWarning:t=>{e.error("You must initialize PostHog before calling "+t)},createLogger:t=>hn(i+" "+t)};return e},b=hn("[PostHog.js]"),q=b.createLogger,Za=q("[ExternalScriptsLoader]"),Xi=(i,e,t)=>{if(i.config.disable_external_dependency_loading)return Za.warn(e+" was requested but loading of external scripts is disabled."),t("Loading of external scripts is disabled");var s=w==null?void 0:w.querySelectorAll("script");if(s){for(var r,n=function(){if(s[a].src===e){var l=s[a];return l.__posthog_loading_callback_fired?{v:t()}:(l.addEventListener("load",c=>{l.__posthog_loading_callback_fired=!0,t(void 0,c)}),l.onerror=c=>t(c),{v:void 0})}},a=0;a<s.length;a++)if(r=n())return r.v}var o=()=>{if(!w)return t("document not found");var l=w.createElement("script");if(l.type="text/javascript",l.crossOrigin="anonymous",l.src=e,l.onload=p=>{l.__posthog_loading_callback_fired=!0,t(void 0,p)},l.onerror=p=>t(p),i.config.prepare_external_dependency_script&&(l=i.config.prepare_external_dependency_script(l)),!l)return t("prepare_external_dependency_script returned null");var c,u=w.querySelectorAll("body > script");u.length>0?(c=u[0].parentNode)==null||c.insertBefore(l,u[0]):w.body.appendChild(l)};w!=null&&w.body?o():w==null||w.addEventListener("DOMContentLoaded",o)};E.__PosthogExtensions__=E.__PosthogExtensions__||{},E.__PosthogExtensions__.loadExternalDependency=(i,e,t)=>{var s="/static/"+e+".js?v="+i.version;if(e==="remote-config"&&(s="/array/"+i.config.token+"/config.js"),e==="toolbar"){var r=3e5;s=s+"&t="+Math.floor(Date.now()/r)*r}var n=i.requestRouter.endpointFor("assets",s);Xi(i,n,t)},E.__PosthogExtensions__.loadSiteApp=(i,e,t)=>{var s=i.requestRouter.endpointFor("api",e);Xi(i,s,t)};var as={};function Ge(i,e,t){if(A(i)){if(Wi&&i.forEach===Wi)i.forEach(e,t);else if("length"in i&&i.length===+i.length){for(var s=0,r=i.length;s<r;s++)if(s in i&&e.call(t,i[s],s)===as)return}}}function F(i,e,t){if(!C(i)){if(A(i))return Ge(i,e,t);if(Ya(i)){for(var s of i.entries())if(e.call(t,s[1],s[0])===as)return}else for(var r in i)if(un.call(i,r)&&e.call(t,i[r],r)===as)return}}var H=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return Ge(t,function(r){for(var n in r)r[n]!==void 0&&(i[n]=r[n])}),i},ks=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return Ge(t,function(r){Ge(r,function(n){i.push(n)})}),i};function is(i){for(var e=Object.keys(i),t=e.length,s=new Array(t);t--;)s[t]=[e[t],i[e[t]]];return s}var Ji=function(i){try{return i()}catch{return}},Qa=function(i){return function(){try{for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i.apply(this,t)}catch(r){b.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),b.critical(r)}}},Si=function(i){var e={};return F(i,function(t,s){(D(t)&&t.length>0||V(t))&&(e[s]=t)}),e};function eo(i,e){return t=i,s=n=>D(n)&&!Ye(e)?n.slice(0,e):n,r=new Set,function n(a,o){return a!==Object(a)?s?s(a,o):a:r.has(a)?void 0:(r.add(a),A(a)?(l=[],Ge(a,c=>{l.push(n(c))})):(l={},F(a,(c,u)=>{r.has(c)||(l[u]=n(c,u))})),l);var l}(t);var t,s,r}var to=["herokuapp.com","vercel.app","netlify.app"];function so(i){var e=i==null?void 0:i.hostname;if(!D(e))return!1;var t=e.split(".").slice(-2).join(".");for(var s of to)if(t===s)return!1;return!0}function pn(i,e){for(var t=0;t<i.length;t++)if(e(i[t]))return i[t]}function O(i,e,t,s){var{capture:r=!1,passive:n=!0}=s??{};i==null||i.addEventListener(e,t,{capture:r,passive:n})}var gn="$people_distinct_id",Nt="__alias",Pt="__timers",Ki="$autocapture_disabled_server_side",Qs="$heatmaps_enabled_server_side",Zi="$exception_capture_enabled_server_side",ei="$error_tracking_suppression_rules",Qi="$error_tracking_capture_extension_exceptions",er="$web_vitals_enabled_server_side",fn="$dead_clicks_enabled_server_side",tr="$web_vitals_allowed_metrics",Ht="$session_recording_enabled_server_side",sr="$console_log_recording_enabled_server_side",ir="$session_recording_network_payload_capture",rr="$session_recording_masking",nr="$session_recording_canvas_recording",ar="$replay_sample_rate",or="$replay_minimum_duration",os="$replay_script_config",ls="$sesid",Ct="$session_is_sampled",ti="$session_recording_url_trigger_activated_session",si="$session_recording_event_trigger_activated_session",ht="$enabled_feature_flags",Ft="$early_access_features",ii="$feature_flag_details",Rt="$stored_person_properties",et="$stored_group_properties",ri="$surveys",Gt="$surveys_activated",cs="$flag_call_reported",Ce="$user_state",ni="$client_session_props",ai="$capture_rate_limit",oi="$initial_campaign_params",li="$initial_referrer_info",us="$initial_person_info",ds="$epp",vn="__POSTHOG_TOOLBAR__",xt="$posthog_cookieless",io=[gn,Nt,"__cmpns",Pt,Ht,Qs,ls,ht,ei,Ce,Ft,ii,et,Rt,ri,cs,ni,ai,oi,li,ds,us];function lr(i){return i instanceof Element&&(i.id===vn||!(i.closest==null||!i.closest(".toolbar-global-fade-container")))}function Es(i){return!!i&&i.nodeType===1}function We(i,e){return!!i&&!!i.tagName&&i.tagName.toLowerCase()===e.toLowerCase()}function _n(i){return!!i&&i.nodeType===3}function mn(i){return!!i&&i.nodeType===11}function $i(i){return i?ws(i).split(/\s+/):[]}function cr(i){var e=f==null?void 0:f.location.href;return!!(e&&i&&i.some(t=>e.match(t)))}function hs(i){var e="";switch(typeof i.className){case"string":e=i.className;break;case"object":e=(i.className&&"baseVal"in i.className?i.className.baseVal:null)||i.getAttribute("class")||"";break;default:e=""}return $i(e)}function yn(i){return C(i)?null:ws(i).split(/(\s+)/).filter(e=>vt(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Ss(i){var e="";return ui(i)&&!xn(i)&&i.childNodes&&i.childNodes.length&&F(i.childNodes,function(t){var s;_n(t)&&t.textContent&&(e+=(s=yn(t.textContent))!==null&&s!==void 0?s:"")}),ws(e)}function bn(i){return m(i.target)?i.srcElement||null:(e=i.target)!=null&&e.shadowRoot?i.composedPath()[0]||null:i.target||null;var e}var ci=["a","button","form","input","select","textarea","label"];function wn(i){var e=i.parentNode;return!(!e||!Es(e))&&e}function ro(i,e,t,s,r){var n,a,o;if(t===void 0&&(t=void 0),!f||!i||We(i,"html")||!Es(i)||(n=t)!=null&&n.url_allowlist&&!cr(t.url_allowlist)||(a=t)!=null&&a.url_ignorelist&&cr(t.url_ignorelist))return!1;if((o=t)!=null&&o.dom_event_allowlist){var l=t.dom_event_allowlist;if(l&&!l.some(x=>e.type===x))return!1}for(var c=!1,u=[i],p=!0,h=i;h.parentNode&&!We(h,"body");)if(mn(h.parentNode))u.push(h.parentNode.host),h=h.parentNode.host;else{if(!(p=wn(h)))break;if(s||ci.indexOf(p.tagName.toLowerCase())>-1)c=!0;else{var g=f.getComputedStyle(p);g&&g.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(p),h=p}if(!function(x,k){var $=k==null?void 0:k.element_allowlist;if(m($))return!0;var S,I=function(M){if($.some(z=>M.tagName.toLowerCase()===z))return{v:!0}};for(var N of x)if(S=I(N))return S.v;return!1}(u,t)||!function(x,k){var $=k==null?void 0:k.css_selector_allowlist;if(m($))return!0;var S,I=function(M){if($.some(z=>M.matches(z)))return{v:!0}};for(var N of x)if(S=I(N))return S.v;return!1}(u,t))return!1;var v=f.getComputedStyle(i);if(v&&v.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var _=i.tagName.toLowerCase();switch(_){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(ci.indexOf(_)>-1||i.getAttribute("contenteditable")==="true")}}function ui(i){for(var e=i;e.parentNode&&!We(e,"body");e=e.parentNode){var t=hs(e);if(j(t,"ph-sensitive")||j(t,"ph-no-capture"))return!1}if(j(hs(i),"ph-include"))return!0;var s=i.type||"";if(D(s))switch(s.toLowerCase()){case"hidden":case"password":return!1}var r=i.name||i.id||"";return!(D(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function xn(i){return!!(We(i,"input")&&!["button","checkbox","submit","reset"].includes(i.type)||We(i,"select")||We(i,"textarea")||i.getAttribute("contenteditable")==="true")}var kn="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",no=new RegExp("^(?:"+kn+")$"),ao=new RegExp(kn),En="\\d{3}-?\\d{2}-?\\d{4}",oo=new RegExp("^("+En+")$"),lo=new RegExp("("+En+")");function vt(i,e){return e===void 0&&(e=!0),!(C(i)||D(i)&&(i=ws(i),(e?no:ao).test((i||"").replace(/[- ]/g,""))||(e?oo:lo).test(i)))}function Sn(i){var e=Ss(i);return vt(e=(e+" "+$n(i)).trim())?e:""}function $n(i){var e="";return i&&i.childNodes&&i.childNodes.length&&F(i.childNodes,function(t){var s;if(t&&((s=t.tagName)==null?void 0:s.toLowerCase())==="span")try{var r=Ss(t);e=(e+" "+r).trim(),t.childNodes&&t.childNodes.length&&(e=(e+" "+$n(t)).trim())}catch(n){b.error("[AutoCapture]",n)}}),e}function co(i){return function(e){var t=e.map(s=>{var r,n,a="";if(s.tag_name&&(a+=s.tag_name),s.attr_class)for(var o of(s.attr_class.sort(),s.attr_class))a+="."+o.replace(/"/g,"");var l=y({},s.text?{text:s.text}:{},{"nth-child":(r=s.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(n=s.nth_of_type)!==null&&n!==void 0?n:0},s.href?{href:s.href}:{},s.attr_id?{attr_id:s.attr_id}:{},s.attributes),c={};return is(l).sort((u,p)=>{var[h]=u,[g]=p;return h.localeCompare(g)}).forEach(u=>{var[p,h]=u;return c[ur(p.toString())]=ur(h.toString())}),a+=":",a+=is(c).map(u=>{var[p,h]=u;return p+'="'+h+'"'}).join("")});return t.join(";")}(function(e){return e.map(t=>{var s,r,n={text:(s=t.$el_text)==null?void 0:s.slice(0,400),tag_name:t.tag_name,href:(r=t.attr__href)==null?void 0:r.slice(0,2048),attr_class:uo(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return is(t).filter(a=>{var[o]=a;return o.indexOf("attr__")===0}).forEach(a=>{var[o,l]=a;return n.attributes[o]=l}),n})}(i))}function ur(i){return i.replace(/"|\\"/g,'\\"')}function uo(i){var e=i.attr__class;return e?A(e)?e:$i(e):void 0}class In{constructor(){this.clicks=[]}isRageClick(e,t,s){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&s-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:s}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:t,timestamp:s}];return!1}}var Fs="$copy_autocapture",Me=function(i){return i.GZipJS="gzip-js",i.Base64="base64",i}({}),ho=["fatal","error","warning","log","info","debug"],po=["localhost","127.0.0.1"],_t=i=>{var e=w==null?void 0:w.createElement("a");return m(e)?null:(e.href=i,e)},go=function(i,e){var t,s;e===void 0&&(e="&");var r=[];return F(i,function(n,a){m(n)||m(a)||a==="undefined"||(t=encodeURIComponent((o=>o instanceof File)(n)?n.name:n.toString()),s=encodeURIComponent(a),r[r.length]=s+"="+t)}),r.join(e)},ps=function(i,e){for(var t,s=((i.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<s.length;r++){var n=s[r].split("=");if(n[0]===e){t=n;break}}if(!A(t)||t.length<2)return"";var a=t[1];try{a=decodeURIComponent(a)}catch{b.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},Ii=function(i,e,t){if(!i||!e||!e.length)return i;for(var s=i.split("#"),r=s[0]||"",n=s[1],a=r.split("?"),o=a[1],l=a[0],c=(o||"").split("&"),u=[],p=0;p<c.length;p++){var h=c[p].split("=");A(h)&&(e.includes(h[0])?u.push(h[0]+"="+t):u.push(c[p]))}var g=l;return o!=null&&(g+="?"+u.join("&")),n!=null&&(g+="#"+n),g},gs=function(i,e){var t=i.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null},dr=q("[AutoCapture]");function Rs(i,e){return e.length>i?e.slice(0,i)+"...":e}function fo(i){if(i.previousElementSibling)return i.previousElementSibling;var e=i;do e=e.previousSibling;while(e&&!Es(e));return e}function vo(i,e,t,s){var r=i.tagName.toLowerCase(),n={tag_name:r};ci.indexOf(r)>-1&&!t&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?n.$el_text=Rs(1024,Sn(i)):n.$el_text=Rs(1024,Ss(i)));var a=hs(i);a.length>0&&(n.classes=a.filter(function(u){return u!==""})),F(i.attributes,function(u){var p;if((!xn(i)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(s==null||!s.includes(u.name))&&!e&&vt(u.value)&&(p=u.name,!D(p)||p.substring(0,10)!=="_ngcontent"&&p.substring(0,7)!=="_nghost")){var h=u.value;u.name==="class"&&(h=$i(h).join(" ")),n["attr__"+u.name]=Rs(1024,h)}});for(var o=1,l=1,c=i;c=fo(c);)o++,c.tagName===i.tagName&&l++;return n.nth_child=o,n.nth_of_type=l,n}function _o(i,e){for(var t,s,{e:r,maskAllElementAttributes:n,maskAllText:a,elementAttributeIgnoreList:o,elementsChainAsString:l}=e,c=[i],u=i;u.parentNode&&!We(u,"body");)mn(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var p,h=[],g={},v=!1,_=!1;if(F(c,I=>{var N=ui(I);I.tagName.toLowerCase()==="a"&&(v=I.getAttribute("href"),v=N&&v&&vt(v)&&v),j(hs(I),"ph-no-capture")&&(_=!0),h.push(vo(I,n,a,o));var M=function(z){if(!ui(z))return{};var P={};return F(z.attributes,function(_e){if(_e.name&&_e.name.indexOf("data-ph-capture-attribute")===0){var te=_e.name.replace("data-ph-capture-attribute-",""),de=_e.value;te&&de&&vt(de)&&(P[te]=de)}}),P}(I);H(g,M)}),_)return{props:{},explicitNoCapture:_};if(a||(i.tagName.toLowerCase()==="a"||i.tagName.toLowerCase()==="button"?h[0].$el_text=Sn(i):h[0].$el_text=Ss(i)),v){var x,k;h[0].attr__href=v;var $=(x=_t(v))==null?void 0:x.host,S=f==null||(k=f.location)==null?void 0:k.host;$&&S&&$!==S&&(p=v)}return{props:H({$event_type:r.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:co(h)},(t=h[0])!=null&&t.$el_text?{$el_text:(s=h[0])==null?void 0:s.$el_text}:{},p&&r.type==="click"?{$external_click_url:p}:{},g)}}class mo{constructor(e){this.C=!1,this.M=null,this.rageclicks=new In,this.O=!1,this.instance=e,this.F=null}get A(){var e,t,s=L(this.instance.config.autocapture)?this.instance.config.autocapture:{};return s.url_allowlist=(e=s.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),s.url_ignorelist=(t=s.url_ignorelist)==null?void 0:t.map(r=>new RegExp(r)),s}D(){if(this.isBrowserSupported()){if(f&&w){var e=s=>{s=s||(f==null?void 0:f.event);try{this.j(s)}catch(r){dr.error("Failed to capture event",r)}};if(O(w,"submit",e,{capture:!0}),O(w,"change",e,{capture:!0}),O(w,"click",e,{capture:!0}),this.A.capture_copied_text){var t=s=>{s=s||(f==null?void 0:f.event),this.j(s,Fs)};O(w,"copy",t,{capture:!0}),O(w,"cut",t,{capture:!0})}}}else dr.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.C&&(this.D(),this.C=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.O=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Ki]:!!e.autocapture_opt_out}),this.M=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.F=e}getElementSelectors(e){var t,s=[];return(t=this.F)==null||t.forEach(r=>{var n=w==null?void 0:w.querySelectorAll(r);n==null||n.forEach(a=>{e===a&&s.push(r)})}),s}get isEnabled(){var e,t,s=(e=this.instance.persistence)==null?void 0:e.props[Ki],r=this.M;if(Ye(r)&&!xe(s)&&!this.instance.L())return!1;var n=(t=this.M)!==null&&t!==void 0?t:!!s;return!!this.instance.config.autocapture&&!n}j(e,t){if(t===void 0&&(t="$autocapture"),this.isEnabled){var s,r=bn(e);_n(r)&&(r=r.parentNode||null),t==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(s=this.rageclicks)!=null&&s.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.j(e,"$rageclick");var n=t===Fs;if(r&&ro(r,e,this.A,n,n?["copy","cut"]:void 0)){var{props:a,explicitNoCapture:o}=_o(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.A.element_attribute_ignorelist,elementsChainAsString:this.O});if(o)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(a.$element_selectors=l),t===Fs){var c,u=yn(f==null||(c=f.getSelection())==null?void 0:c.toString()),p=e.type||"clipboard";if(!u)return!1;a.$selected_content=u,a.$copy_type=p}return this.instance.capture(t,a),!0}}}isBrowserSupported(){return le(w==null?void 0:w.querySelectorAll)}}Math.trunc||(Math.trunc=function(i){return i<0?Math.ceil(i):Math.floor(i)}),Number.isInteger||(Number.isInteger=function(i){return V(i)&&isFinite(i)&&Math.floor(i)===i});var hr="0123456789abcdef";class fs{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,s,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(s)||!Number.isInteger(r)||e<0||t<0||s<0||r<0||e>0xffffffffffff||t>4095||s>1073741823||r>4294967295)throw new RangeError("invalid field value");var n=new Uint8Array(16);return n[0]=e/Math.pow(2,40),n[1]=e/Math.pow(2,32),n[2]=e/Math.pow(2,24),n[3]=e/Math.pow(2,16),n[4]=e/Math.pow(2,8),n[5]=e,n[6]=112|t>>>8,n[7]=t,n[8]=128|s>>>24,n[9]=s>>>16,n[10]=s>>>8,n[11]=s,n[12]=r>>>24,n[13]=r>>>16,n[14]=r>>>8,n[15]=r,new fs(n)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+hr.charAt(this.bytes[t]>>>4)+hr.charAt(15&this.bytes[t]),t!==3&&t!==5&&t!==7&&t!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new fs(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var t=0;t<16;t++){var s=this.bytes[t]-e.bytes[t];if(s!==0)return Math.sign(s)}return 0}}class yo{constructor(){this.N=0,this.U=0,this.q=new bo}generate(){var e=this.generateOrAbort();if(m(e)){this.N=0;var t=this.generateOrAbort();if(m(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.N)this.N=e,this.B();else{if(!(e+1e4>this.N))return;this.U++,this.U>4398046511103&&(this.N++,this.B())}return fs.fromFieldsV7(this.N,Math.trunc(this.U/Math.pow(2,30)),this.U&Math.pow(2,30)-1,this.q.nextUint32())}B(){this.U=1024*this.q.nextUint32()+(1023&this.q.nextUint32())}}var pr,jn=i=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<i.length;e++)i[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return i};f&&!m(f.crypto)&&crypto.getRandomValues&&(jn=i=>crypto.getRandomValues(i));class bo{constructor(){this.H=new Uint32Array(8),this.W=1/0}nextUint32(){return this.W>=this.H.length&&(jn(this.H),this.W=0),this.H[this.W++]}}var ze=()=>wo().toString(),wo=()=>(pr||(pr=new yo)).generate(),kt="",xo=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function ko(i,e){if(e){var t=function(r,n){if(n===void 0&&(n=w),kt)return kt;if(!n||["localhost","127.0.0.1"].includes(r))return"";for(var a=r.split("."),o=Math.min(a.length,8),l="dmn_chk_"+ze();!kt&&o--;){var c=a.slice(o).join("."),u=l+"=1;domain=."+c+";path=/";n.cookie=u+";max-age=3",n.cookie.includes(l)&&(n.cookie=u+";max-age=0",kt=c)}return kt}(i);if(!t){var s=(r=>{var n=r.match(xo);return n?n[0]:""})(i);s!==t&&b.info("Warning: cookie subdomain discovery mismatch",s,t),t=s}return t?"; domain=."+t:""}return""}var Ee={G:()=>!!w,J:function(i){b.error("cookieStore error: "+i)},V:function(i){if(w){try{for(var e=i+"=",t=w.cookie.split(";").filter(n=>n.length),s=0;s<t.length;s++){for(var r=t[s];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},K:function(i){var e;try{e=JSON.parse(Ee.V(i))||{}}catch{}return e},Y:function(i,e,t,s,r){if(w)try{var n="",a="",o=ko(w.location.hostname,s);if(t){var l=new Date;l.setTime(l.getTime()+24*t*60*60*1e3),n="; expires="+l.toUTCString()}r&&(a="; secure");var c=i+"="+encodeURIComponent(JSON.stringify(e))+n+"; SameSite=Lax; path=/"+o+a;return c.length>3686.4&&b.warn("cookieStore warning: large cookie, len="+c.length),w.cookie=c,c}catch{return}},X:function(i,e){if(w!=null&&w.cookie)try{Ee.Y(i,"",-1,e)}catch{return}}},As=null,B={G:function(){if(!Ye(As))return As;var i=!0;if(m(f))i=!1;else try{var e="__mplssupport__";B.Y(e,"xyz"),B.V(e)!=='"xyz"'&&(i=!1),B.X(e)}catch{i=!1}return i||b.error("localStorage unsupported; falling back to cookie store"),As=i,i},J:function(i){b.error("localStorage error: "+i)},V:function(i){try{return f==null?void 0:f.localStorage.getItem(i)}catch(e){B.J(e)}return null},K:function(i){try{return JSON.parse(B.V(i))||{}}catch{}return null},Y:function(i,e){try{f==null||f.localStorage.setItem(i,JSON.stringify(e))}catch(t){B.J(t)}},X:function(i){try{f==null||f.localStorage.removeItem(i)}catch(e){B.J(e)}}},Eo=["distinct_id",ls,Ct,ds,us],Wt=y({},B,{K:function(i){try{var e={};try{e=Ee.K(i)||{}}catch{}var t=H(e,JSON.parse(B.V(i)||"{}"));return B.Y(i,t),t}catch{}return null},Y:function(i,e,t,s,r,n){try{B.Y(i,e,void 0,void 0,n);var a={};Eo.forEach(o=>{e[o]&&(a[o]=e[o])}),Object.keys(a).length&&Ee.Y(i,a,t,s,r,n)}catch(o){B.J(o)}},X:function(i,e){try{f==null||f.localStorage.removeItem(i),Ee.X(i,e)}catch(t){B.J(t)}}}),Vt={},So={G:function(){return!0},J:function(i){b.error("memoryStorage error: "+i)},V:function(i){return Vt[i]||null},K:function(i){return Vt[i]||null},Y:function(i,e){Vt[i]=e},X:function(i){delete Vt[i]}},Je=null,G={G:function(){if(!Ye(Je))return Je;if(Je=!0,m(f))Je=!1;else try{var i="__support__";G.Y(i,"xyz"),G.V(i)!=='"xyz"'&&(Je=!1),G.X(i)}catch{Je=!1}return Je},J:function(i){b.error("sessionStorage error: ",i)},V:function(i){try{return f==null?void 0:f.sessionStorage.getItem(i)}catch(e){G.J(e)}return null},K:function(i){try{return JSON.parse(G.V(i))||null}catch{}return null},Y:function(i,e){try{f==null||f.sessionStorage.setItem(i,JSON.stringify(e))}catch(t){G.J(t)}},X:function(i){try{f==null||f.sessionStorage.removeItem(i)}catch(e){G.J(e)}}},Fe=function(i){return i[i.PENDING=-1]="PENDING",i[i.DENIED=0]="DENIED",i[i.GRANTED=1]="GRANTED",i}({});class $o{constructor(e){this._instance=e}get A(){return this._instance.config}get consent(){return this.Z()?Fe.DENIED:this.tt}isOptedOut(){return this.A.cookieless_mode==="always"||this.consent===Fe.DENIED||this.consent===Fe.PENDING&&(this.A.opt_out_capturing_by_default||this.A.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===Fe.DENIED}optInOut(e){this.it.Y(this.et,e?1:0,this.A.cookie_expiration,this.A.cross_subdomain_cookie,this.A.secure_cookie)}reset(){this.it.X(this.et,this.A.cross_subdomain_cookie)}get et(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:s}=this._instance.config;return s||(t?t+e:"__ph_opt_in_out_"+e)}get tt(){var e=this.it.V(this.et);return Cs(e)?Fe.GRANTED:j(Ka,e)?Fe.DENIED:Fe.PENDING}get it(){if(!this.rt){var e=this.A.opt_out_capturing_persistence_type;this.rt=e==="localStorage"?B:Ee;var t=e==="localStorage"?Ee:B;t.V(this.et)&&(this.rt.V(this.et)||this.optInOut(Cs(t.V(this.et))),t.X(this.et,this.A.cross_subdomain_cookie))}return this.rt}Z(){return!!this.A.respect_dnt&&!!pn([re==null?void 0:re.doNotTrack,re==null?void 0:re.msDoNotTrack,E.doNotTrack],e=>Cs(e))}}var Yt=q("[Dead Clicks]"),Io=()=>!0,jo=i=>{var e,t=!((e=i.instance.persistence)==null||!e.get_property(fn)),s=i.instance.config.capture_dead_clicks;return xe(s)?s:t};class Nn{get lazyLoadedDeadClicksAutocapture(){return this.st}constructor(e,t,s){this.instance=e,this.isEnabled=t,this.onCapture=s,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[fn]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.nt(()=>{this.ot()})}nt(e){var t,s;(t=E.__PosthogExtensions__)!=null&&t.initDeadClicksAutocapture&&e(),(s=E.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?Yt.error("failed to load script",r):e()})}ot(){var e;if(w){if(!this.st&&(e=E.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var t=L(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.st=E.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.st.start(w),Yt.info("starting...")}}else Yt.error("`document` not found. Cannot start.")}stop(){this.st&&(this.st.stop(),this.st=void 0,Yt.info("stopping..."))}}var Et=q("[ExceptionAutocapture]");class No{constructor(e){var t,s,r;this.lt=()=>{var n;if(f&&this.isEnabled&&(n=E.__PosthogExtensions__)!=null&&n.errorWrappingFunctions){var a=E.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,o=E.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=E.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ht&&this.A.capture_unhandled_errors&&(this.ht=a(this.captureException.bind(this))),!this.ut&&this.A.capture_unhandled_rejections&&(this.ut=o(this.captureException.bind(this))),!this.dt&&this.A.capture_console_errors&&(this.dt=l(this.captureException.bind(this)))}catch(c){Et.error("failed to start",c),this.vt()}}},this._instance=e,this.ct=!((t=this._instance.persistence)==null||!t.props[Zi]),this.A=this.ft(),this.gt=new dn({refillRate:(s=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&s!==void 0?s:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4,P:Et}),this.startIfEnabled()}ft(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return L(e)?t=y({},t,e):(m(e)?this.ct:e)&&(t=y({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.A.capture_console_errors||this.A.capture_unhandled_errors||this.A.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Et.info("enabled"),this.nt(this.lt))}nt(e){var t,s;(t=E.__PosthogExtensions__)!=null&&t.errorWrappingFunctions&&e(),(s=E.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return Et.error("failed to load script",r);e()})}vt(){var e,t,s;(e=this.ht)==null||e.call(this),this.ht=void 0,(t=this.ut)==null||t.call(this),this.ut=void 0,(s=this.dt)==null||s.call(this),this.dt=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ct=!!t||!1,this.A=this.ft(),this._instance.persistence&&this._instance.persistence.register({[Zi]:this.ct}),this.startIfEnabled()}captureException(e){var t,s=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=s+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(t=e.$exception_list[0].type)!==null&&t!==void 0?t:"Exception";this.gt.consumeRateLimit(r)?Et.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}}function Pn(i){return!m(Event)&&Cn(i,Event)}function Cn(i,e){try{return i instanceof e}catch{return!1}}function Fn(i){switch(Object.prototype.toString.call(i)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return Cn(i,Error)}}function rs(i,e){return Object.prototype.toString.call(i)==="[object "+e+"]"}function Ts(i){return rs(i,"DOMError")}var gr=/\(error: (.*)\)/,fr=50,pt="?";function Ms(i,e,t,s){var r={platform:"web:javascript",filename:i,function:e==="<anonymous>"?pt:e,in_app:!0};return m(t)||(r.lineno=t),m(s)||(r.colno=s),r}var Po=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Co=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Fo=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ro=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ao=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,To=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var s=e.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return function(r,n){n===void 0&&(n=0);for(var a=[],o=r.split(`
`),l=n;l<o.length;l++){var c=o[l];if(!(c.length>1024)){var u=gr.test(c)?c.replace(gr,"$1"):c;if(!u.match(/\S*Error: /)){for(var p of s){var h=p(u);if(h){a.push(h);break}}if(a.length>=fr)break}}}return function(g){if(!g.length)return[];var v=Array.from(g);return v.reverse(),v.slice(0,fr).map(_=>y({},_,{filename:_.filename||Mo(v).filename,function:_.function||pt}))}(a)}}([30,i=>{var e=Po.exec(i);if(e){var[,t,s,r]=e;return Ms(t,pt,+s,+r)}var n=Co.exec(i);if(n){if(n[2]&&n[2].indexOf("eval")===0){var a=Fo.exec(n[2]);a&&(n[2]=a[1],n[3]=a[2],n[4]=a[3])}var[o,l]=_r(n[1]||pt,n[2]);return Ms(l,o,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,i=>{var e=Ro.exec(i);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var t=Ao.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}var s=e[3],r=e[1]||pt;return[r,s]=_r(r,s),Ms(s,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function Mo(i){return i[i.length-1]||{}}var Xt,vr,Os,_r=(i,e)=>{var t=i.indexOf("safari-extension")!==-1,s=i.indexOf("safari-web-extension")!==-1;return t||s?[i.indexOf("@")!==-1?i.split("@")[0]:pt,t?"safari-extension:"+e:"safari-web-extension:"+e]:[i,e]},Oo=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function ji(i,e){e===void 0&&(e=0);var t=i.stacktrace||i.stack||"",s=function(a){return a&&Lo.test(a.message)?1:0}(i);try{var r=To,n=function(a,o){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var p=Object.keys(u);return Os&&p.length===vr||(vr=p.length,Os=p.reduce((h,g)=>{Xt||(Xt={});var v=Xt[g];if(v)h[v[0]]=v[1];else for(var _=c(g),x=_.length-1;x>=0;x--){var k=_[x],$=k==null?void 0:k.filename,S=u[g];if($&&S){h[$]=S,Xt[g]=[$,S];break}}return h},{})),Os}(o);return a.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),a}(r(t,s),r);return n.slice(0,n.length-e)}catch{}return[]}var Lo=/Minified React error #\d+;/i;function Do(i,e){var t,s,r=ji(i),n=(t=e==null?void 0:e.handled)===null||t===void 0||t,a=(s=e==null?void 0:e.synthetic)!==null&&s!==void 0&&s;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:i.name,value:function(o){var l=o.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(i),stacktrace:{frames:r,type:"raw"},mechanism:{handled:n,synthetic:a}}}function Rn(i,e){var t=Do(i,e);return i.cause&&Fn(i.cause)&&i.cause!==i?[t,...Rn(i.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[t]}function Ls(i,e){return{$exception_list:Rn(i,e),$exception_level:"error"}}function Ds(i,e){var t,s,r,n=(t=e==null?void 0:e.handled)===null||t===void 0||t,a=(s=e==null?void 0:e.synthetic)===null||s===void 0||s,o={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:i||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:n,synthetic:a}};if(e!=null&&e.syntheticException){var l=ji(e.syntheticException,1);l.length&&(o.stacktrace={frames:l,type:"raw"})}return{$exception_list:[o],$exception_level:"error"}}function Ho(i){return D(i)&&!Zs(i)&&ho.indexOf(i)>=0}function Bo(i,e){var t,s,r=(t=e==null?void 0:e.handled)===null||t===void 0||t,n=(s=e==null?void 0:e.synthetic)===null||s===void 0||s,a=e!=null&&e.overrideExceptionType?e.overrideExceptionType:Pn(i)?i.constructor.name:"Error",o="Non-Error 'exception' captured with keys: "+function(u,p){p===void 0&&(p=40);var h=Object.keys(u);if(h.sort(),!h.length)return"[object has no keys]";for(var g=h.length;g>0;g--){var v=h.slice(0,g).join(", ");if(!(v.length>p))return g===h.length||v.length<=p?v:v.slice(0,p)+"..."}return""}(i),l={type:a,value:o,mechanism:{handled:r,synthetic:n}};if(e!=null&&e.syntheticException){var c=ji(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:Ho(i.level)?i.level:"error"}}function qo(i,e){var{error:t,event:s}=i,r={$exception_list:[]},n=t||s;if(Ts(n)||function(h){return rs(h,"DOMException")}(n)){var a=n;if(function(h){return"stack"in h}(n))r=Ls(n,e);else{var o=a.name||(Ts(a)?"DOMError":"DOMException"),l=a.message?o+": "+a.message:o;r=Ds(l,y({},e,{overrideExceptionType:Ts(a)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in a&&(r.$exception_DOMException_code=""+a.code),r}if(function(h){return rs(h,"ErrorEvent")}(n)&&n.error)return Ls(n.error,e);if(Fn(n))return Ls(n,e);if(function(h){return rs(h,"Object")}(n)||Pn(n))return Bo(n,e);if(m(t)&&D(s)){var c="Error",u=s,p=s.match(Oo);return p&&(c=p[1],u=p[2]),Ds(u,y({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Ds(n,e)}function mr(i,e,t){try{if(!(e in i))return()=>{};var s=i[e],r=t(s);return le(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),i[e]=r,()=>{i[e]=s}}catch{return()=>{}}}class Uo{constructor(e){var t;this._instance=e,this._t=(f==null||(t=f.location)==null?void 0:t.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(b.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.bt&&this.bt(),this.bt=void 0,b.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(f&&f.history){var s=this;(e=f.history.pushState)!=null&&e.__posthog_wrapped__||mr(f.history,"pushState",r=>function(n,a,o){r.call(this,n,a,o),s.yt("pushState")}),(t=f.history.replaceState)!=null&&t.__posthog_wrapped__||mr(f.history,"replaceState",r=>function(n,a,o){r.call(this,n,a,o),s.yt("replaceState")}),this.wt()}}yt(e){try{var t,s=f==null||(t=f.location)==null?void 0:t.pathname;if(!s)return;s!==this._t&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this._t=s}catch(r){b.error("Error capturing "+e+" pageview",r)}}wt(){if(!this.bt){var e=()=>{this.yt("popstate")};O(f,"popstate",e),this.bt=()=>{f&&f.removeEventListener("popstate",e)}}}}function vs(i){var e,t;return((e=JSON.stringify(i,(t=[],function(s,r){if(L(r)){for(;t.length>0&&t[t.length-1]!==this;)t.pop();return t.includes(r)?"[Circular]":(t.push(r),r)}return r})))==null?void 0:e.length)||0}function di(i,e){if(e===void 0&&(e=66060288e-1),i.size>=e&&i.data.length>1){var t=Math.floor(i.data.length/2),s=i.data.slice(0,t),r=i.data.slice(t);return[di({size:vs(s),data:s,sessionId:i.sessionId,windowId:i.windowId}),di({size:vs(r),data:r,sessionId:i.sessionId,windowId:i.windowId})].flatMap(n=>n)}return[i]}var Re=(i=>(i[i.DomContentLoaded=0]="DomContentLoaded",i[i.Load=1]="Load",i[i.FullSnapshot=2]="FullSnapshot",i[i.IncrementalSnapshot=3]="IncrementalSnapshot",i[i.Meta=4]="Meta",i[i.Custom=5]="Custom",i[i.Plugin=6]="Plugin",i))(Re||{}),ve=(i=>(i[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i))(ve||{}),hi="[SessionRecording]",pi="redacted",Jt={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:i=>i,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},zo=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Go=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Wo=["/s/","/e/","/i/"];function yr(i,e,t,s){if(C(i))return i;var r=(e==null?void 0:e["content-length"])||function(n){return new Blob([n]).size}(i);return D(r)&&(r=parseInt(r)),r>t?hi+" "+s+" body too large to record ("+r+" bytes)":i}function br(i,e){if(C(i))return i;var t=i;return vt(t,!1)||(t=hi+" "+e+" body "+pi),F(Go,s=>{var r,n;(r=t)!=null&&r.length&&((n=t)==null?void 0:n.indexOf(s))!==-1&&(t=hi+" "+e+" body "+pi+" as might contain: "+s)}),t}var Vo=(i,e)=>{var t,s,r,n={payloadSizeLimitBytes:Jt.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...Jt.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...Jt.payloadHostDenyList]},a=i.session_recording.recordHeaders!==!1&&e.recordHeaders,o=i.session_recording.recordBody!==!1&&e.recordBody,l=i.capture_performance!==!1&&e.recordPerformance,c=(t=n,r=Math.min(1e6,(s=t.payloadSizeLimitBytes)!==null&&s!==void 0?s:1e6),h=>(h!=null&&h.requestBody&&(h.requestBody=yr(h.requestBody,h.requestHeaders,r,"Request")),h!=null&&h.responseBody&&(h.responseBody=yr(h.responseBody,h.responseHeaders,r,"Response")),h)),u=h=>{return c(((_,x)=>{var k,$=_t(_.name),S=x.indexOf("http")===0?(k=_t(x))==null?void 0:k.pathname:x;S==="/"&&(S="");var I=$==null?void 0:$.pathname.replace(S||"","");if(!($&&I&&Wo.some(N=>I.indexOf(N)===0)))return _})((v=(g=h).requestHeaders,C(v)||F(Object.keys(v??{}),_=>{zo.includes(_.toLowerCase())&&(v[_]=pi)}),g),i.api_host));var g,v},p=le(i.session_recording.maskNetworkRequestFn);return p&&le(i.session_recording.maskCapturedNetworkRequestFn)&&b.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),p&&(i.session_recording.maskCapturedNetworkRequestFn=h=>{var g=i.session_recording.maskNetworkRequestFn({url:h.name});return y({},h,{name:g==null?void 0:g.url})}),n.maskRequestFn=le(i.session_recording.maskCapturedNetworkRequestFn)?h=>{var g,v=u(h);return v&&(g=i.session_recording.maskCapturedNetworkRequestFn==null?void 0:i.session_recording.maskCapturedNetworkRequestFn(v))!==null&&g!==void 0?g:void 0}:h=>function(g){if(!m(g))return g.requestBody=br(g.requestBody,"Request"),g.responseBody=br(g.responseBody,"Response"),g}(u(h)),y({},Jt,n,{recordHeaders:a,recordBody:o,recordPerformance:l,recordInitialRequests:l})};class Yo{constructor(e,t){var s,r;t===void 0&&(t={}),this.St={},this.$t=n=>{if(!this.St[n]){var a,o;this.St[n]=!0;var l=this.xt(n);(a=(o=this.i).onBlockedNode)==null||a.call(o,n,l)}},this.kt=n=>{var a=this.xt(n);if((a==null?void 0:a.nodeName)!=="svg"&&a instanceof Element){var o=a.closest("svg");if(o)return[this._rrweb.mirror.getId(o),o]}return[n,a]},this.xt=n=>this._rrweb.mirror.getNode(n),this.Et=n=>{var a,o,l,c,u,p,h,g;return((a=(o=n.removes)==null?void 0:o.length)!==null&&a!==void 0?a:0)+((l=(c=n.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(p=n.texts)==null?void 0:p.length)!==null&&u!==void 0?u:0)+((h=(g=n.adds)==null?void 0:g.length)!==null&&h!==void 0?h:0)},this.throttleMutations=n=>{if(n.type!==3||n.data.source!==0)return n;var a=n.data,o=this.Et(a);a.attributes&&(a.attributes=a.attributes.filter(c=>{var[u]=this.kt(c.id);return!this.gt.consumeRateLimit(u)&&c}));var l=this.Et(a);return l!==0||o===l?n:void 0},this._rrweb=e,this.i=t,this.gt=new dn({bucketSize:(s=this.i.bucketSize)!==null&&s!==void 0?s:100,refillRate:(r=this.i.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,I:this.$t,P:b})}}var ce=Uint8Array,ee=Uint16Array,mt=Uint32Array,Ni=new ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pi=new ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wr=new ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),An=function(i,e){for(var t=new ee(31),s=0;s<31;++s)t[s]=e+=1<<i[s-1];var r=new mt(t[30]);for(s=1;s<30;++s)for(var n=t[s];n<t[s+1];++n)r[n]=n-t[s]<<5|s;return[t,r]},Tn=An(Ni,2),Xo=Tn[0],gi=Tn[1];Xo[28]=258,gi[258]=28;for(var xr=An(Pi,0)[1],Mn=new ee(32768),T=0;T<32768;++T){var Ke=(43690&T)>>>1|(21845&T)<<1;Ke=(61680&(Ke=(52428&Ke)>>>2|(13107&Ke)<<2))>>>4|(3855&Ke)<<4,Mn[T]=((65280&Ke)>>>8|(255&Ke)<<8)>>>1}var Lt=function(i,e,t){for(var s=i.length,r=0,n=new ee(e);r<s;++r)++n[i[r]-1];var a,o=new ee(e);for(r=0;r<e;++r)o[r]=o[r-1]+n[r-1]<<1;for(a=new ee(s),r=0;r<s;++r)a[r]=Mn[o[i[r]-1]++]>>>15-i[r];return a},st=new ce(288);for(T=0;T<144;++T)st[T]=8;for(T=144;T<256;++T)st[T]=9;for(T=256;T<280;++T)st[T]=7;for(T=280;T<288;++T)st[T]=8;var _s=new ce(32);for(T=0;T<32;++T)_s[T]=5;var Jo=Lt(st,9),Ko=Lt(_s,5),On=function(i){return(i/8>>0)+(7&i&&1)},Ln=function(i,e,t){(t==null||t>i.length)&&(t=i.length);var s=new(i instanceof ee?ee:i instanceof mt?mt:ce)(t-e);return s.set(i.subarray(e,t)),s},Ne=function(i,e,t){t<<=7&e;var s=e/8>>0;i[s]|=t,i[s+1]|=t>>>8},St=function(i,e,t){t<<=7&e;var s=e/8>>0;i[s]|=t,i[s+1]|=t>>>8,i[s+2]|=t>>>16},Hs=function(i,e){for(var t=[],s=0;s<i.length;++s)i[s]&&t.push({s,f:i[s]});var r=t.length,n=t.slice();if(!r)return[new ce(0),0];if(r==1){var a=new ce(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(N,M){return N.f-M.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,p=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=r-1;)o=t[t[c].f<t[p].f?c++:p++],l=t[c!=u&&t[c].f<t[p].f?c++:p++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=n[0].s;for(s=1;s<r;++s)n[s].s>h&&(h=n[s].s);var g=new ee(h+1),v=fi(t[u-1],g,0);if(v>e){s=0;var _=0,x=v-e,k=1<<x;for(n.sort(function(N,M){return g[M.s]-g[N.s]||N.f-M.f});s<r;++s){var $=n[s].s;if(!(g[$]>e))break;_+=k-(1<<v-g[$]),g[$]=e}for(_>>>=x;_>0;){var S=n[s].s;g[S]<e?_-=1<<e-g[S]++-1:++s}for(;s>=0&&_;--s){var I=n[s].s;g[I]==e&&(--g[I],++_)}v=e}return[new ce(g),v]},fi=function(i,e,t){return i.s==-1?Math.max(fi(i.l,e,t+1),fi(i.r,e,t+1)):e[i.s]=t},kr=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new ee(++e),s=0,r=i[0],n=1,a=function(l){t[s++]=l},o=1;o<=e;++o)if(i[o]==r&&o!=e)++n;else{if(!r&&n>2){for(;n>138;n-=138)a(32754);n>2&&(a(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(a(r),--n;n>6;n-=6)a(8304);n>2&&(a(n-3<<5|8208),n=0)}for(;n--;)a(r);n=1,r=i[o]}return[t.subarray(0,s),e]},$t=function(i,e){for(var t=0,s=0;s<e.length;++s)t+=i[s]*e[s];return t},vi=function(i,e,t){var s=t.length,r=On(e+2);i[r]=255&s,i[r+1]=s>>>8,i[r+2]=255^i[r],i[r+3]=255^i[r+1];for(var n=0;n<s;++n)i[r+n+4]=t[n];return 8*(r+4+s)},Er=function(i,e,t,s,r,n,a,o,l,c,u){Ne(e,u++,t),++r[256];for(var p=Hs(r,15),h=p[0],g=p[1],v=Hs(n,15),_=v[0],x=v[1],k=kr(h),$=k[0],S=k[1],I=kr(_),N=I[0],M=I[1],z=new ee(19),P=0;P<$.length;++P)z[31&$[P]]++;for(P=0;P<N.length;++P)z[31&N[P]]++;for(var _e=Hs(z,7),te=_e[0],de=_e[1],ae=19;ae>4&&!te[wr[ae-1]];--ae);var je,me,ye,nt,Oe=c+5<<3,Xe=$t(r,st)+$t(n,_s)+a,be=$t(r,h)+$t(n,_)+a+14+3*ae+$t(z,te)+(2*z[16]+3*z[17]+7*z[18]);if(Oe<=Xe&&Oe<=be)return vi(e,u,i.subarray(l,l+c));if(Ne(e,u,1+(be<Xe)),u+=2,be<Xe){je=Lt(h,g),me=h,ye=Lt(_,x),nt=_;var Le=Lt(te,de);for(Ne(e,u,S-257),Ne(e,u+5,M-1),Ne(e,u+10,ae-4),u+=14,P=0;P<ae;++P)Ne(e,u+3*P,te[wr[P]]);u+=3*ae;for(var at=[$,N],X=0;X<2;++X){var oe=at[X];for(P=0;P<oe.length;++P){var se=31&oe[P];Ne(e,u,Le[se]),u+=te[se],se>15&&(Ne(e,u,oe[P]>>>5&127),u+=oe[P]>>>12)}}}else je=Jo,me=st,ye=Ko,nt=_s;for(P=0;P<o;++P)if(s[P]>255){se=s[P]>>>18&31,St(e,u,je[se+257]),u+=me[se+257],se>7&&(Ne(e,u,s[P]>>>23&31),u+=Ni[se]);var ot=31&s[P];St(e,u,ye[ot]),u+=nt[ot],ot>3&&(St(e,u,s[P]>>>5&8191),u+=Pi[ot])}else St(e,u,je[s[P]]),u+=me[s[P]];return St(e,u,je[256]),u+me[256]},Zo=new mt([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Qo=function(){for(var i=new mt(256),e=0;e<256;++e){for(var t=e,s=9;--s;)t=(1&t&&3988292384)^t>>>1;i[e]=t}return i}(),el=function(){var i=4294967295;return{p:function(e){for(var t=i,s=0;s<e.length;++s)t=Qo[255&t^e[s]]^t>>>8;i=t},d:function(){return 4294967295^i}}},tl=function(i,e,t,s,r){return function(n,a,o,l,c,u){var p=n.length,h=new ce(l+p+5*(1+Math.floor(p/7e3))+c),g=h.subarray(l,h.length-c),v=0;if(!a||p<8)for(var _=0;_<=p;_+=65535){var x=_+65535;x<p?v=vi(g,v,n.subarray(_,x)):(g[_]=u,v=vi(g,v,n.subarray(_,p)))}else{for(var k=Zo[a-1],$=k>>>13,S=8191&k,I=(1<<o)-1,N=new ee(32768),M=new ee(I+1),z=Math.ceil(o/3),P=2*z,_e=function(Ps){return(n[Ps]^n[Ps+1]<<z^n[Ps+2]<<P)&I},te=new mt(25e3),de=new ee(288),ae=new ee(32),je=0,me=0,ye=(_=0,0),nt=0,Oe=0;_<p;++_){var Xe=_e(_),be=32767&_,Le=M[Xe];if(N[be]=Le,M[Xe]=be,nt<=_){var at=p-_;if((je>7e3||ye>24576)&&at>423){v=Er(n,g,0,te,de,ae,me,ye,Oe,_-Oe,v),ye=je=me=0,Oe=_;for(var X=0;X<286;++X)de[X]=0;for(X=0;X<30;++X)ae[X]=0}var oe=2,se=0,ot=S,De=be-Le&32767;if(at>2&&Xe==_e(_-De))for(var ba=Math.min($,at)-1,wa=Math.min(32767,_),xa=Math.min(258,at);De<=wa&&--ot&&be!=Le;){if(n[_+oe]==n[_+oe-De]){for(var He=0;He<xa&&n[_+He]==n[_+He-De];++He);if(He>oe){if(oe=He,se=De,He>ba)break;var ka=Math.min(De,He-2),Di=0;for(X=0;X<ka;++X){var Ns=_-De+X+32768&32767,Hi=Ns-N[Ns]+32768&32767;Hi>Di&&(Di=Hi,Le=Ns)}}}De+=(be=Le)-(Le=N[be])+32768&32767}if(se){te[ye++]=268435456|gi[oe]<<18|xr[se];var Bi=31&gi[oe],qi=31&xr[se];me+=Ni[Bi]+Pi[qi],++de[257+Bi],++ae[qi],nt=_+oe,++je}else te[ye++]=n[_],++de[n[_]]}}v=Er(n,g,u,te,de,ae,me,ye,Oe,_-Oe,v)}return Ln(h,0,l+On(v)+c)}(i,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+e.mem,t,s,!0)},_i=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},sl=function(i,e){var t=e.filename;if(i[0]=31,i[1]=139,i[2]=8,i[8]=e.level<2?4:e.level==9?2:0,i[9]=3,e.mtime!=0&&_i(i,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){i[3]=8;for(var s=0;s<=t.length;++s)i[s+10]=t.charCodeAt(s)}},il=function(i){return 10+(i.filename&&i.filename.length+1||0)};function Dn(i,e){e===void 0&&(e={});var t=el(),s=i.length;t.p(i);var r=tl(i,e,il(e),8),n=r.length;return sl(r,e),_i(r,n-8,t.d()),_i(r,n-4,s),r}function Hn(i,e){var t=i.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(i);for(var s=new ce(i.length+(i.length>>>1)),r=0,n=function(c){s[r++]=c},a=0;a<t;++a){if(r+5>s.length){var o=new ce(r+8+(t-a<<1));o.set(s),s=o}var l=i.charCodeAt(a);l<128||e?n(l):l<2048?(n(192|l>>>6),n(128|63&l)):l>55295&&l<57344?(n(240|(l=65536+(1047552&l)|1023&i.charCodeAt(++a))>>>18),n(128|l>>>12&63),n(128|l>>>6&63),n(128|63&l)):(n(224|l>>>12),n(128|l>>>6&63),n(128|63&l))}return Ln(s,0,r)}function rl(i,e){return function(t){for(var s=0,r=0;r<t.length;r++)s=(s<<5)-s+t.charCodeAt(r),s|=0;return Math.abs(s)}(i)%100<ne(100*e,0,100,b)}var Ve="disabled",Ci="sampled",ms="active",it="buffering",Fi="paused",Ri="trigger",Se=Ri+"_activated",Y=Ri+"_pending",$e=Ri+"_"+Ve;function Sr(i,e){return e.some(t=>t.matching==="regex"&&new RegExp(t.url).test(i))}class Bn{constructor(e){this.It=e}triggerStatus(e){var t=this.It.map(s=>s.triggerStatus(e));return t.includes(Se)?Se:t.includes(Y)?Y:$e}stop(){this.It.forEach(e=>e.stop())}}class qn{constructor(e){this.It=e}triggerStatus(e){var t=new Set;for(var s of this.It)t.add(s.triggerStatus(e));switch(t.delete($e),t.size){case 0:return $e;case 1:return Array.from(t)[0];default:return Y}}stop(){this.It.forEach(e=>e.stop())}}class nl{triggerStatus(){return Y}stop(){}}class al{constructor(e){this.Pt=[],this.Rt=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var t,s;this.Pt=((t=e.sessionRecording)==null?void 0:t.urlTriggers)||[],this.Rt=((s=e.sessionRecording)==null?void 0:s.urlBlocklist)||[]}Tt(e){var t;return this.Pt.length===0?$e:((t=this._instance)==null?void 0:t.get_property(ti))===e?Se:Y}triggerStatus(e){var t=this.Tt(e),s=t===Se?Se:t===Y?Y:$e;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:s}),s}checkUrlTriggerConditions(e,t,s){if(f!==void 0&&f.location.href){var r=f.location.href,n=this.urlBlocked,a=Sr(r,this.Rt);n&&a||(a&&!n?e():!a&&n&&t(),Sr(r,this.Pt)&&s("url"))}}stop(){}}class ol{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Ct=()=>{},this._instance=e}triggerStatus(){var e=Y;return C(this.linkedFlag)&&(e=$e),this.linkedFlagSeen&&(e=Se),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,t){var s;if(this.linkedFlag=((s=e.sessionRecording)==null?void 0:s.linkedFlag)||null,!C(this.linkedFlag)&&!this.linkedFlagSeen){var r=D(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,n=D(this.linkedFlag)?null:this.linkedFlag.variant;this.Ct=this._instance.onFeatureFlags((a,o)=>{var l=!1;if(L(o)&&r in o){var c=o[r];l=xe(c)?c===!0:n?c===n:!!c}this.linkedFlagSeen=l,l&&t(r,n)})}}stop(){this.Ct()}}class ll{constructor(e){this.Mt=[],this._instance=e}onRemoteConfig(e){var t;this.Mt=((t=e.sessionRecording)==null?void 0:t.eventTriggers)||[]}Ot(e){var t;return this.Mt.length===0?$e:((t=this._instance)==null?void 0:t.get_property(si))===e?Se:Y}triggerStatus(e){var t=this.Ot(e),s=t===Se?Se:t===Y?Y:$e;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:s}),s}stop(){}}function cl(i){return i.isRecordingEnabled?it:Ve}function ul(i){if(!i.receivedFlags)return it;if(!i.isRecordingEnabled)return Ve;if(i.urlTriggerMatching.urlBlocked)return Fi;var e=i.isSampled===!0,t=new Bn([i.eventTriggerMatching,i.urlTriggerMatching,i.linkedFlagMatching]).triggerStatus(i.sessionId);return e?Ci:t===Se?ms:t===Y?it:i.isSampled===!1?Ve:ms}function dl(i){if(!i.receivedFlags)return it;if(!i.isRecordingEnabled)return Ve;if(i.urlTriggerMatching.urlBlocked)return Fi;var e=new qn([i.eventTriggerMatching,i.urlTriggerMatching,i.linkedFlagMatching]).triggerStatus(i.sessionId),t=e!==$e,s=xe(i.isSampled);return t&&e===Y?it:t&&e===$e||s&&!i.isSampled?Ve:i.isSampled===!0?Ci:ms}var At="[SessionRecording]",U=q(At);function Kt(){var i;return E==null||(i=E.__PosthogExtensions__)==null||(i=i.rrweb)==null?void 0:i.record}var hl=3e5,pl=[ve.MouseMove,ve.MouseInteraction,ve.Scroll,ve.ViewportResize,ve.Input,ve.TouchMove,ve.MediaInteraction,ve.Drag],$r=i=>({rrwebMethod:i,enqueuedAt:Date.now(),attempt:1});function Ze(i){return function(e,t){for(var s="",r=0;r<e.length;){var n=e[r++];s+=String.fromCharCode(n)}return s}(Dn(Hn(JSON.stringify(i))))}function Ir(i){return i.type===Re.Custom&&i.data.tag==="sessionIdle"}class jr{get sessionId(){return this.Ft}get At(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Dt}get jt(){if(!this._instance.sessionManager)throw new Error(At+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Lt(){var e,t;return this.Nt.triggerStatus(this.sessionId)===Y?6e4:(e=(t=this._instance.config.session_recording)==null?void 0:t.full_snapshot_interval_millis)!==null&&e!==void 0?e:hl}get zt(){var e=this._instance.get_property(Ct);return xe(e)?e:null}get Ut(){var e,t,s=(e=this.H)==null?void 0:e.data[((t=this.H)==null?void 0:t.data.length)-1],{sessionStartTimestamp:r}=this.jt.checkAndGetSessionAndWindowId(!0);return s?s.timestamp-r:null}get qt(){var e=!!this._instance.get_property(Ht),t=!this._instance.config.disable_session_recording;return f&&e&&t}get Bt(){var e=!!this._instance.get_property(sr),t=this._instance.config.enable_recording_console_log;return t??e}get Ht(){var e,t,s,r,n,a,o=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(nr),c=(e=(t=o==null?void 0:o.recordCanvas)!==null&&t!==void 0?t:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(s=(r=o==null?void 0:o.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&s!==void 0?s:4,p=(n=(a=o==null?void 0:o.canvasQuality)!==null&&a!==void 0?a:l==null?void 0:l.quality)!==null&&n!==void 0?n:.4;if(typeof p=="string"){var h=parseFloat(p);p=isNaN(h)?.4:h}return{enabled:c,fps:ne(u,0,12,U.createLogger("canvas recording fps"),4),quality:ne(p,0,1,U.createLogger("canvas recording quality"),.4)}}get Wt(){var e,t,s=this._instance.get_property(ir),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(t=this._instance.config.session_recording)==null?void 0:t.recordBody},n=(r==null?void 0:r.recordHeaders)||(s==null?void 0:s.recordHeaders),a=(r==null?void 0:r.recordBody)||(s==null?void 0:s.recordBody),o=L(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(xe(o)?o:s!=null&&s.capturePerformance);return n||a||l?{recordHeaders:n,recordBody:a,recordPerformance:l}:void 0}get Gt(){var e,t,s,r,n,a,o=this._instance.get_property(rr),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(t=this._instance.config.session_recording)==null?void 0:t.maskTextSelector,blockSelector:(s=this._instance.config.session_recording)==null?void 0:s.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:o==null?void 0:o.maskAllInputs,u=(n=l==null?void 0:l.maskTextSelector)!==null&&n!==void 0?n:o==null?void 0:o.maskTextSelector,p=(a=l==null?void 0:l.blockSelector)!==null&&a!==void 0?a:o==null?void 0:o.blockSelector;return m(c)&&m(u)&&m(p)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:p}}get Jt(){var e=this._instance.get_property(ar);return V(e)?e:null}get Vt(){var e=this._instance.get_property(or);return V(e)?e:null}get status(){return this.Kt?this.Yt({receivedFlags:this.Kt,isRecordingEnabled:this.qt,isSampled:this.zt,urlTriggerMatching:this.Xt,eventTriggerMatching:this.Qt,linkedFlagMatching:this.Zt,sessionId:this.sessionId}):it}constructor(e){if(this.Yt=cl,this.Kt=!1,this.ti=[],this.ii="unknown",this.ei=Date.now(),this.Nt=new nl,this.ri=void 0,this.si=void 0,this.ni=void 0,this.oi=void 0,this.ai=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.li=()=>{this.hi()},this.ui=()=>{this.tryAddCustomEvent("browser offline",{})},this.di=()=>{this.tryAddCustomEvent("browser online",{})},this.vi=()=>{if(w!=null&&w.visibilityState){var r="window "+w.visibilityState;this.tryAddCustomEvent(r,{})}},this._instance=e,this.Dt=!1,this.ci="/s/",this.fi=void 0,this.Kt=!1,!this._instance.sessionManager)throw U.error("started without valid sessionManager"),new Error(At+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(At+' cannot be used with cookieless_mode="always"');this.Zt=new ol(this._instance),this.Xt=new al(this._instance),this.Qt=new ll(this._instance);var{sessionId:t,windowId:s}=this.jt.checkAndGetSessionAndWindowId();this.Ft=t,this.pi=s,this.H=this.gi(),this.At>=this.jt.sessionTimeoutMs&&U.warn("session_idle_threshold_ms ("+this.At+") is greater than the session timeout ("+this.jt.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.qt?(this.mi(e),O(f,"beforeunload",this.li),O(f,"offline",this.ui),O(f,"online",this.di),O(f,"visibilitychange",this.vi),this.bi(),this.yi(),C(this.ri)&&(this.ri=this._instance.on("eventCaptured",t=>{try{if(t.event==="$pageview"){var s=t!=null&&t.properties.$current_url?this.wi(t==null?void 0:t.properties.$current_url):"";if(!s)return;this.tryAddCustomEvent("$pageview",{href:s})}}catch(r){U.error("Could not add $pageview to rrweb session",r)}})),this.si||(this.si=this.jt.onSessionId((t,s,r)=>{var n,a;r&&(this.tryAddCustomEvent("$session_id_change",{sessionId:t,windowId:s,changeReason:r}),(n=this._instance)==null||(n=n.persistence)==null||n.unregister(si),(a=this._instance)==null||(a=a.persistence)==null||a.unregister(ti))}))):this.stopRecording()}stopRecording(){var e,t,s,r;this.Dt&&this.fi&&(this.fi(),this.fi=void 0,this.Dt=!1,f==null||f.removeEventListener("beforeunload",this.li),f==null||f.removeEventListener("offline",this.ui),f==null||f.removeEventListener("online",this.di),f==null||f.removeEventListener("visibilitychange",this.vi),this.gi(),clearInterval(this.Si),(e=this.ri)==null||e.call(this),this.ri=void 0,(t=this.ai)==null||t.call(this),this.ai=void 0,(s=this.si)==null||s.call(this),this.si=void 0,(r=this.oi)==null||r.call(this),this.oi=void 0,this.Qt.stop(),this.Xt.stop(),this.Zt.stop(),U.info("stopped"))}$i(){var e;(e=this._instance.persistence)==null||e.unregister(Ct)}xi(e){var t,s=this.Ft!==e,r=this.Jt;if(V(r)){var n=this.zt,a=s||!xe(n),o=a?rl(e,r):n;a&&(o?this.ki(Ci):U.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:o})),(t=this._instance.persistence)==null||t.register({[Ct]:o})}else this.$i()}onRemoteConfig(e){var t,s,r,n;this.tryAddCustomEvent("$remote_config_received",e),this.Ei(e),(t=e.sessionRecording)!=null&&t.endpoint&&(this.ci=(n=e.sessionRecording)==null?void 0:n.endpoint),this.bi(),((s=e.sessionRecording)==null?void 0:s.triggerMatchType)==="any"?(this.Yt=ul,this.Nt=new Bn([this.Qt,this.Xt])):(this.Yt=dl,this.Nt=new qn([this.Qt,this.Xt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Xt.onRemoteConfig(e),this.Qt.onRemoteConfig(e),this.Zt.onRemoteConfig(e,(a,o)=>{this.ki("linked_flag_matched",{flag:a,variant:o})}),this.Kt=!0,this.startIfEnabledOrStop()}bi(){V(this.Jt)&&C(this.oi)&&(this.oi=this.jt.onSessionId(e=>{this.xi(e)}))}Ei(e){if(this._instance.persistence){var t,s=this._instance.persistence,r=()=>{var n,a,o,l,c,u,p,h,g,v=(n=e.sessionRecording)==null?void 0:n.sampleRate,_=C(v)?null:parseFloat(v);C(_)&&this.$i();var x=(a=e.sessionRecording)==null?void 0:a.minimumDurationMilliseconds;s.register({[Ht]:!!e.sessionRecording,[sr]:(o=e.sessionRecording)==null?void 0:o.consoleLogRecordingEnabled,[ir]:y({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[rr]:(c=e.sessionRecording)==null?void 0:c.masking,[nr]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(p=e.sessionRecording)==null?void 0:p.canvasFps,quality:(h=e.sessionRecording)==null?void 0:h.canvasQuality},[ar]:_,[or]:m(x)?null:x,[os]:(g=e.sessionRecording)==null?void 0:g.scriptConfig})};r(),(t=this.ni)==null||t.call(this),this.ni=this.jt.onSessionId(r)}}log(e,t){var s;t===void 0&&(t="log"),(s=this._instance.sessionRecording)==null||s.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:t,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}mi(e){if(!m(Object.assign)&&!m(Array.from)&&!(this.Dt||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var t;this.Dt=!0,this.jt.checkAndGetSessionAndWindowId(),Kt()?this.Ii():(t=E.__PosthogExtensions__)==null||t.loadExternalDependency==null||t.loadExternalDependency(this._instance,this.Pi,s=>{if(s)return U.error("could not load recorder",s);this.Ii()}),U.info("starting"),this.status===ms&&this.ki(e||"recording_initialized")}}get Pi(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(os))==null?void 0:e.script)||"recorder"}Ri(e){var t;return e.type===3&&pl.indexOf((t=e.data)==null?void 0:t.source)!==-1}Ti(e){var t=this.Ri(e);t||this.ii||e.timestamp-this.ei>this.At&&(this.ii=!0,clearInterval(this.Si),this.tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ei,threshold:this.At,bufferLength:this.H.data.length,bufferSize:this.H.size}),this.hi());var s=!1;if(t&&(this.ei=e.timestamp,this.ii)){var r=this.ii==="unknown";this.ii=!1,r||(this.tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),s=!0)}if(!this.ii){var{windowId:n,sessionId:a}=this.jt.checkAndGetSessionAndWindowId(!t,e.timestamp),o=this.Ft!==a,l=this.pi!==n;this.pi=n,this.Ft=a,o||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):s&&this.Ci()}}Mi(e){try{return e.rrwebMethod(),!0}catch(t){return this.ti.length<10?this.ti.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):U.warn("could not emit queued rrweb event.",t,e),!1}}tryAddCustomEvent(e,t){return this.Mi($r(()=>Kt().addCustomEvent(e,t)))}Oi(){return this.Mi($r(()=>Kt().takeFullSnapshot()))}Ii(){var e,t,s,r,n={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},a=this._instance.config.session_recording;for(var[o,l]of Object.entries(a||{}))o in n&&(o==="maskInputOptions"?n.maskInputOptions=y({password:!0},l):n[o]=l);this.Ht&&this.Ht.enabled&&(n.recordCanvas=!0,n.sampling={canvas:this.Ht.fps},n.dataURLOptions={type:"image/webp",quality:this.Ht.quality}),this.Gt&&(n.maskAllInputs=(t=this.Gt.maskAllInputs)===null||t===void 0||t,n.maskTextSelector=(s=this.Gt.maskTextSelector)!==null&&s!==void 0?s:void 0,n.blockSelector=(r=this.Gt.blockSelector)!==null&&r!==void 0?r:void 0);var c=Kt();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new Yo(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(p,h)=>{var g="Too many mutations on node '"+p+"'. Rate limiting. This could be due to SVG animations or something similar";U.info(g,{node:h}),this.log(At+" "+g,"warn")}});var u=this.Ai();this.fi=c(y({emit:p=>{this.onRRwebEmit(p)},plugins:u},n)),this.ei=Date.now(),this.ii=xe(this.ii)?this.ii:"unknown",this.tryAddCustomEvent("$session_options",{sessionRecordingOptions:n,activePlugins:u.map(p=>p==null?void 0:p.name)}),this.tryAddCustomEvent("$posthog_config",{config:this._instance.config})}else U.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ci(){if(this.Si&&clearInterval(this.Si),this.ii!==!0){var e=this.Lt;e&&(this.Si=setInterval(()=>{this.Oi()},e))}}Ai(){var e,t,s=[],r=(e=E.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Bt&&s.push(r());var n=(t=E.__PosthogExtensions__)==null||(t=t.rrwebPlugins)==null?void 0:t.getRecordNetworkPlugin;return this.Wt&&le(n)&&(!po.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?s.push(n(Vo(this._instance.config,this.Wt))):U.info("NetworkCapture not started because we are on localhost.")),s}onRRwebEmit(e){var t;if(this.Di(),e&&L(e)){if(e.type===Re.Meta){var s=this.wi(e.data.href);if(this.ji=s,!s)return;e.data.href=s}else this.Li();if(this.Xt.checkUrlTriggerConditions(()=>this.Ni(),()=>this.zi(),h=>this.Ui(h)),!this.Xt.urlBlocked||(r=e).type===Re.Custom&&r.data.tag==="recording paused"){var r;e.type===Re.FullSnapshot&&this.Ci(),e.type===Re.FullSnapshot&&this.Kt&&this.Nt.triggerStatus(this.sessionId)===Y&&this.gi();var n=this.Fi?this.Fi.throttleMutations(e):e;if(n){var a=function(h){var g=h;if(g&&L(g)&&g.type===6&&L(g.data)&&g.data.plugin==="rrweb/console@1"){g.data.payload.payload.length>10&&(g.data.payload.payload=g.data.payload.payload.slice(0,10),g.data.payload.payload.push("...[truncated]"));for(var v=[],_=0;_<g.data.payload.payload.length;_++)g.data.payload.payload[_]&&g.data.payload.payload[_].length>2e3?v.push(g.data.payload.payload[_].slice(0,2e3)+"...[truncated]"):v.push(g.data.payload.payload[_]);return g.data.payload.payload=v,h}return h}(n);if(this.Ti(a),this.ii!==!0||Ir(a)){if(Ir(a)){var o=a.data.payload;if(o){var l=o.lastActivityTimestamp,c=o.threshold;a.timestamp=l+c}}var u=(t=this._instance.config.session_recording.compress_events)===null||t===void 0||t?function(h){if(vs(h)<1024)return h;try{if(h.type===Re.FullSnapshot)return y({},h,{data:Ze(h.data),cv:"2024-10"});if(h.type===Re.IncrementalSnapshot&&h.data.source===ve.Mutation)return y({},h,{cv:"2024-10",data:y({},h.data,{texts:Ze(h.data.texts),attributes:Ze(h.data.attributes),removes:Ze(h.data.removes),adds:Ze(h.data.adds)})});if(h.type===Re.IncrementalSnapshot&&h.data.source===ve.StyleSheetRule)return y({},h,{cv:"2024-10",data:y({},h.data,{adds:h.data.adds?Ze(h.data.adds):void 0,removes:h.data.removes?Ze(h.data.removes):void 0})})}catch(g){U.error("could not compress event - will use uncompressed event",g)}return h}(a):a,p={$snapshot_bytes:vs(u),$snapshot_data:u,$session_id:this.Ft,$window_id:this.pi};this.status!==Ve?this.qi(p):this.gi()}}}}}Li(){if(!this._instance.config.capture_pageview&&f){var e=this.wi(f.location.href);this.ji!==e&&(this.tryAddCustomEvent("$url_changed",{href:e}),this.ji=e)}}Di(){if(this.ti.length){var e=[...this.ti];this.ti=[],e.forEach(t=>{Date.now()-t.enqueuedAt<=2e3&&this.Mi(t)})}}wi(e){var t=this._instance.config.session_recording;if(t.maskNetworkRequestFn){var s,r={url:e};return(s=r=t.maskNetworkRequestFn(r))==null?void 0:s.url}return e}gi(){return this.H={size:0,data:[],sessionId:this.Ft,windowId:this.pi},this.H}hi(){this.Bi&&(clearTimeout(this.Bi),this.Bi=void 0);var e=this.Vt,t=this.Ut,s=V(t)&&t>=0,r=V(e)&&s&&t<e;return this.status===it||this.status===Fi||this.status===Ve||r?(this.Bi=setTimeout(()=>{this.hi()},2e3),this.H):(this.H.data.length>0&&di(this.H).forEach(n=>{this.Hi({$snapshot_bytes:n.size,$snapshot_data:n.data,$session_id:n.sessionId,$window_id:n.windowId,$lib:"web",$lib_version:Te.LIB_VERSION})}),this.gi())}qi(e){var t,s=2+(((t=this.H)==null?void 0:t.data.length)||0);!this.ii&&(this.H.size+e.$snapshot_bytes+s>943718.4||this.H.sessionId!==this.Ft)&&(this.H=this.hi()),this.H.size+=e.$snapshot_bytes,this.H.data.push(e.$snapshot_data),this.Bi||this.ii||(this.Bi=setTimeout(()=>{this.hi()},2e3))}Hi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.ci),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}Ui(e){var t;this.Nt.triggerStatus(this.sessionId)===Y&&((t=this._instance)==null||(t=t.persistence)==null||t.register({[e==="url"?ti:si]:this.Ft}),this.hi(),this.ki(e+"_trigger_matched"))}Ni(){this.Xt.urlBlocked||(this.Xt.urlBlocked=!0,clearInterval(this.Si),U.info("recording paused due to URL blocker"),this.tryAddCustomEvent("recording paused",{reason:"url blocker"}))}zi(){this.Xt.urlBlocked&&(this.Xt.urlBlocked=!1,this.Oi(),this.Ci(),this.tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),U.info("recording resumed"))}yi(){this.Qt.Mt.length!==0&&C(this.ai)&&(this.ai=this._instance.on("eventCaptured",e=>{try{this.Qt.Mt.includes(e.event)&&this.Ui("event")}catch(t){U.error("Could not activate event trigger",t)}}))}overrideLinkedFlag(){this.Zt.linkedFlagSeen=!0,this.Oi(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Ct]:!0}),this.Oi(),this.ki("sampling_overridden")}overrideTrigger(e){this.Ui(e)}ki(e,t){this._instance.register_for_session({$session_recording_start_reason:e}),U.info(e.replace("_"," "),t),j(["recording_initialized","session_id_changed"],e)||this.tryAddCustomEvent(e,t)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.jt.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.H.data.length,$sdk_debug_replay_internal_buffer_size:this.H.size,$sdk_debug_current_session_duration:this.Ut,$sdk_debug_session_start:e}}}var Bs=q("[SegmentIntegration]");function gl(i,e){var t=i.config.segment;if(!t)return e();(function(s,r){var n=s.config.segment;if(!n)return r();var a=l=>{var c=()=>l.anonymousId()||ze();s.config.get_device_id=c,l.id()&&(s.register({distinct_id:l.id(),$device_id:c()}),s.persistence.set_property(Ce,"identified")),r()},o=n.user();"then"in o&&le(o.then)?o.then(l=>a(l)):a(o)})(i,()=>{t.register((s=>{Promise&&Promise.resolve||Bs.warn("This browser does not have Promise support, and can not use the segment integration");var r=(n,a)=>{if(!a)return n;n.event.userId||n.event.anonymousId===s.get_distinct_id()||(Bs.info("No userId set, resetting PostHog"),s.reset()),n.event.userId&&n.event.userId!==s.get_distinct_id()&&(Bs.info("UserId set, identifying with PostHog"),s.identify(n.event.userId));var o=s.calculateEventProperties(a,n.event.properties);return n.event.properties=Object.assign({},o,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:n=>r(n,n.event.event),page:n=>r(n,"$pageview"),identify:n=>r(n,"$identify"),screen:n=>r(n,"$screen")}})(i)).then(()=>{e()})})}var Un="posthog-js";function zn(i,e){var{organization:t,projectId:s,prefix:r,severityAllowList:n=["error"],sendExceptionsToPostHog:a=!0}=e===void 0?{}:e;return o=>{var l,c,u,p,h;if(!(n==="*"||n.includes(o.level))||!i.__loaded)return o;o.tags||(o.tags={});var g=i.requestRouter.endpointFor("ui","/project/"+i.config.token+"/person/"+i.get_distinct_id());o.tags["PostHog Person URL"]=g,i.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=i.get_session_replay_url({withTimestamp:!0}));var v=((l=o.exception)==null?void 0:l.values)||[],_=v.map(k=>y({},k,{stacktrace:k.stacktrace?y({},k.stacktrace,{type:"raw",frames:(k.stacktrace.frames||[]).map($=>y({},$,{platform:"web:javascript"}))}):void 0})),x={$exception_message:((c=v[0])==null?void 0:c.value)||o.message,$exception_type:(u=v[0])==null?void 0:u.type,$exception_personURL:g,$exception_level:o.level,$exception_list:_,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((p=v[0])==null?void 0:p.value)||o.message,$sentry_exception_type:(h=v[0])==null?void 0:h.type,$sentry_tags:o.tags};return t&&s&&(x.$sentry_url=(r||"https://sentry.io/organizations/")+t+"/issues/?project="+s+"&query="+o.event_id),a&&i.exceptions.sendExceptionEvent(x),o}}class fl{constructor(e,t,s,r,n,a){this.name=Un,this.setupOnce=function(o){o(zn(e,{organization:t,projectId:s,prefix:r,severityAllowList:n,sendExceptionsToPostHog:a==null||a}))}}}var vl=f!=null&&f.location?gs(f.location.hash,"__posthog")||gs(location.hash,"state"):null,Nr="_postHogToolbarParams",Pr=q("[Toolbar]"),Ue=function(i){return i[i.UNINITIALIZED=0]="UNINITIALIZED",i[i.LOADING=1]="LOADING",i[i.LOADED=2]="LOADED",i}(Ue||{});class _l{constructor(e){this.instance=e}Wi(e){E.ph_toolbar_state=e}Gi(){var e;return(e=E.ph_toolbar_state)!==null&&e!==void 0?e:Ue.UNINITIALIZED}maybeLoadToolbar(e,t,s){if(e===void 0&&(e=void 0),t===void 0&&(t=void 0),s===void 0&&(s=void 0),!f||!w)return!1;e=e??f.location,s=s??f.history;try{if(!t){try{f.localStorage.setItem("test","test"),f.localStorage.removeItem("test")}catch{return!1}t=f==null?void 0:f.localStorage}var r,n=vl||gs(e.hash,"__posthog")||gs(e.hash,"state"),a=n?Ji(()=>JSON.parse(atob(decodeURIComponent(n))))||Ji(()=>JSON.parse(decodeURIComponent(n))):null;return a&&a.action==="ph_authorize"?((r=a).source="url",r&&Object.keys(r).length>0&&(a.desiredHash?e.hash=a.desiredHash:s?s.replaceState(s.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(t.getItem(Nr)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Ji(e){var t=E.ph_load_toolbar||E.ph_load_editor;!C(t)&&le(t)?t(e,this.instance):Pr.warn("No toolbar load function found")}loadToolbar(e){var t=!(w==null||!w.getElementById(vn));if(!f||t)return!1;var s=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=y({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},s?{instrument:!1}:{});if(f.localStorage.setItem(Nr,JSON.stringify(y({},r,{source:void 0}))),this.Gi()===Ue.LOADED)this.Ji(r);else if(this.Gi()===Ue.UNINITIALIZED){var n;this.Wi(Ue.LOADING),(n=E.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this.instance,"toolbar",a=>{if(a)return Pr.error("[Toolbar] Failed to load",a),void this.Wi(Ue.UNINITIALIZED);this.Wi(Ue.LOADED),this.Ji(r)}),O(f,"turbolinks:load",()=>{this.Wi(Ue.UNINITIALIZED),this.loadToolbar(r)})}return!0}Vi(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,s){return e===void 0&&(e=void 0),t===void 0&&(t=void 0),s===void 0&&(s=void 0),this.maybeLoadToolbar(e,t,s)}}var ml=q("[TracingHeaders]");class yl{constructor(e){this.Ki=void 0,this.Yi=void 0,this.lt=()=>{var t,s;m(this.Ki)&&((t=E.__PosthogExtensions__)==null||(t=t.tracingHeadersPatchFns)==null||t._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),m(this.Yi)&&((s=E.__PosthogExtensions__)==null||(s=s.tracingHeadersPatchFns)==null||s._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}nt(e){var t,s;(t=E.__PosthogExtensions__)!=null&&t.tracingHeadersPatchFns&&e(),(s=E.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return ml.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.nt(this.lt):((e=this.Ki)==null||e.call(this),(t=this.Yi)==null||t.call(this),this.Ki=void 0,this.Yi=void 0)}}var Be=q("[Web Vitals]"),Cr=9e5;class bl{constructor(e){var t;this.Xi=!1,this.C=!1,this.H={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Qi=()=>{clearTimeout(this.Zi),this.H.metrics.length!==0&&(this._instance.capture("$web_vitals",this.H.metrics.reduce((s,r)=>y({},s,{["$web_vitals_"+r.name+"_event"]:y({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.H={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.te=s=>{var r,n=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(m(n))Be.error("Could not read session ID. Dropping metrics!");else{this.H=this.H||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var a=this.ie();m(a)||(C(s==null?void 0:s.name)||C(s==null?void 0:s.value)?Be.error("Invalid metric received",s):this.ee&&s.value>=this.ee?Be.error("Ignoring metric with value >= "+this.ee,s):(this.H.url!==a&&(this.Qi(),this.Zi=setTimeout(this.Qi,this.flushToCaptureTimeoutMs)),m(this.H.url)&&(this.H.url=a),this.H.firstMetricTimestamp=m(this.H.firstMetricTimestamp)?Date.now():this.H.firstMetricTimestamp,s.attribution&&s.attribution.interactionTargetElement&&(s.attribution.interactionTargetElement=void 0),this.H.metrics.push(y({},s,{$current_url:a,$session_id:n.sessionId,$window_id:n.windowId,timestamp:Date.now()})),this.H.metrics.length===this.allowedMetrics.length&&this.Qi()))}},this.lt=()=>{var s,r,n,a,o=E.__PosthogExtensions__;m(o)||m(o.postHogWebVitalsCallbacks)||({onLCP:s,onCLS:r,onFCP:n,onINP:a}=o.postHogWebVitalsCallbacks),s&&r&&n&&a?(this.allowedMetrics.indexOf("LCP")>-1&&s(this.te.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.te.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&n(this.te.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&a(this.te.bind(this)),this.C=!0):Be.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Xi=!((t=this._instance.persistence)==null||!t.props[er]),this.startIfEnabled()}get allowedMetrics(){var e,t,s=L(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return m(s)?((t=this._instance.persistence)==null?void 0:t.props[tr])||["CLS","FCP","INP","LCP"]:s}get flushToCaptureTimeoutMs(){return(L(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ee(){var e=L(this._instance.config.capture_performance)&&V(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:Cr;return 0<e&&e<=6e4?Cr:e}get isEnabled(){var e=Z==null?void 0:Z.protocol;if(e!=="http:"&&e!=="https:")return Be.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=L(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:xe(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return xe(t)?t:this.Xi}startIfEnabled(){this.isEnabled&&!this.C&&(Be.info("enabled, starting..."),this.nt(this.lt))}onRemoteConfig(e){var t=L(e.capturePerformance)&&!!e.capturePerformance.web_vitals,s=L(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[er]:t}),this._instance.persistence.register({[tr]:s})),this.Xi=t,this.startIfEnabled()}nt(e){var t,s;(t=E.__PosthogExtensions__)!=null&&t.postHogWebVitalsCallbacks&&e(),(s=E.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"web-vitals",r=>{r?Be.error("failed to load script",r):e()})}ie(){var e=f?f.location.href:void 0;return e||Be.error("Could not determine current URL"),e}}var wl=q("[Heatmaps]");function Fr(i){return L(i)&&"clientX"in i&&"clientY"in i&&V(i.clientX)&&V(i.clientY)}class xl{constructor(e){var t;this.rageclicks=new In,this.Xi=!1,this.C=!1,this.re=null,this.instance=e,this.Xi=!((t=this.instance.persistence)==null||!t.props[Qs])}get flushIntervalMilliseconds(){var e=5e3;return L(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return m(this.instance.config.capture_heatmaps)?m(this.instance.config.enable_heatmaps)?this.Xi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.C)return;wl.info("starting..."),this.se(),this.re=setInterval(this.ne.bind(this),this.flushIntervalMilliseconds)}else{var e,t;clearInterval((e=this.re)!==null&&e!==void 0?e:void 0),(t=this.oe)==null||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Qs]:t}),this.Xi=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.H;return this.H=void 0,e}ae(e){this.le(e.originalEvent,"deadclick")}se(){f&&w&&(O(f,"beforeunload",this.ne.bind(this)),O(w,"click",e=>this.le(e||(f==null?void 0:f.event)),{capture:!0}),O(w,"mousemove",e=>this.he(e||(f==null?void 0:f.event)),{capture:!0}),this.oe=new Nn(this.instance,Io,this.ae.bind(this)),this.oe.startIfEnabled(),this.C=!0)}ue(e,t){var s=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),n=this.instance.scrollManager.scrollElement(),a=function(o,l,c){for(var u=o;u&&Es(u)&&!We(u,"body");){if(u===c)return!1;if(j(l,f==null?void 0:f.getComputedStyle(u).position))return!0;u=wn(u)}return!1}(bn(e),["fixed","sticky"],n);return{x:e.clientX+(a?0:r),y:e.clientY+(a?0:s),target_fixed:a,type:t}}le(e,t){var s;if(t===void 0&&(t="click"),!lr(e.target)&&Fr(e)){var r=this.ue(e,t);(s=this.rageclicks)!=null&&s.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.de(y({},r,{type:"rageclick"})),this.de(r)}}he(e){!lr(e.target)&&Fr(e)&&(clearTimeout(this.ve),this.ve=setTimeout(()=>{this.de(this.ue(e,"mousemove"))},500))}de(e){if(f){var t=f.location.href;this.H=this.H||{},this.H[t]||(this.H[t]=[]),this.H[t].push(e)}}ne(){this.H&&!dt(this.H)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class kl{constructor(e){this._instance=e}doPageView(e,t){var s,r=this.ce(e,t);return this.fe={pathname:(s=f==null?void 0:f.location.pathname)!==null&&s!==void 0?s:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var t;return this.ce(e,(t=this.fe)==null?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.fe)==null?void 0:e.pageViewId}}ce(e,t){var s=this.fe;if(!s)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:s.pageViewId},n=this._instance.scrollManager.getContext();if(n&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:a,lastScrollY:o,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:p}=n;if(!(m(a)||m(o)||m(l)||m(c)||m(u)||m(p))){a=Math.ceil(a),o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),p=Math.ceil(p);var h=a<=1?1:ne(o/a,0,1,b),g=a<=1?1:ne(l/a,0,1,b),v=c<=1?1:ne(u/c,0,1,b),_=c<=1?1:ne(p/c,0,1,b);r=H(r,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:h,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:g,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:v,$prev_pageview_max_content:p,$prev_pageview_max_content_percentage:_})}}return s.pathname&&(r.$prev_pageview_pathname=s.pathname),s.timestamp&&(r.$prev_pageview_duration=(e.getTime()-s.timestamp.getTime())/1e3),r}}var El=function(i){var e,t,s,r,n="";for(e=t=0,s=(i=(i+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<s;r++){var a=i.charCodeAt(r),o=null;a<128?t++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),Ye(o)||(t>e&&(n+=i.substring(e,t)),n+=o,e=t=r+1)}return t>e&&(n+=i.substring(e,i.length)),n},Sl=!!Js||!!Xs,Rr="text/plain",ys=(i,e)=>{var[t,s]=i.split("?"),r=y({},e);s==null||s.split("&").forEach(a=>{var[o]=a.split("=");delete r[o]});var n=go(r);return t+"?"+(n=n?(s?s+"&":"")+n:s)},Tt=(i,e)=>JSON.stringify(i,(t,s)=>typeof s=="bigint"?s.toString():s,e),qs=i=>{var{data:e,compression:t}=i;if(e){if(t===Me.GZipJS){var s=Dn(Hn(Tt(e)),{mtime:0}),r=new Blob([s],{type:Rr});return{contentType:Rr,body:r,estimatedSize:r.size}}if(t===Me.Base64){var n=function(l){var c,u,p,h,g,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=0,x=0,k="",$=[];if(!l)return l;l=El(l);do c=(g=l.charCodeAt(_++)<<16|l.charCodeAt(_++)<<8|l.charCodeAt(_++))>>18&63,u=g>>12&63,p=g>>6&63,h=63&g,$[x++]=v.charAt(c)+v.charAt(u)+v.charAt(p)+v.charAt(h);while(_<l.length);switch(k=$.join(""),l.length%3){case 1:k=k.slice(0,-2)+"==";break;case 2:k=k.slice(0,-1)+"="}return k}(Tt(e)),a=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Tt(l)))(n);return{contentType:"application/x-www-form-urlencoded",body:a,estimatedSize:new Blob([a]).size}}var o=Tt(e);return{contentType:"application/json",body:o,estimatedSize:new Blob([o]).size}}},ns=[];Xs&&ns.push({transport:"fetch",method:i=>{var e,t,{contentType:s,body:r,estimatedSize:n}=(e=qs(i))!==null&&e!==void 0?e:{},a=new Headers;F(i.headers,function(u,p){a.append(p,u)}),s&&a.append("Content-Type",s);var o=i.url,l=null;if(Yi){var c=new Yi;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),i.timeout)}}Xs(o,y({method:(i==null?void 0:i.method)||"GET",headers:a,keepalive:i.method==="POST"&&(n||0)<52428.8,body:r,signal:(t=l)==null?void 0:t.signal},i.fetchOptions)).then(u=>u.text().then(p=>{var h={statusCode:u.status,text:p};if(u.status===200)try{h.json=JSON.parse(p)}catch(g){b.error(g)}i.callback==null||i.callback(h)})).catch(u=>{b.error(u),i.callback==null||i.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Js&&ns.push({transport:"XHR",method:i=>{var e,t=new Js;t.open(i.method||"GET",i.url,!0);var{contentType:s,body:r}=(e=qs(i))!==null&&e!==void 0?e:{};F(i.headers,function(n,a){t.setRequestHeader(a,n)}),s&&t.setRequestHeader("Content-Type",s),i.timeout&&(t.timeout=i.timeout),i.disableXHRCredentials||(t.withCredentials=!0),t.onreadystatechange=()=>{if(t.readyState===4){var n={statusCode:t.status,text:t.responseText};if(t.status===200)try{n.json=JSON.parse(t.responseText)}catch{}i.callback==null||i.callback(n)}},t.send(r)}}),re!=null&&re.sendBeacon&&ns.push({transport:"sendBeacon",method:i=>{var e=ys(i.url,{beacon:"1"});try{var t,{contentType:s,body:r}=(t=qs(i))!==null&&t!==void 0?t:{},n=typeof r=="string"?new Blob([r],{type:s}):r;re.sendBeacon(e,n)}catch{}}});var yt=function(i,e){if(!function(t){try{new RegExp(t)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(i)}catch{return!1}};function Ar(i,e,t){return Tt({distinct_id:i,userPropertiesToSet:e,userPropertiesToSetOnce:t})}var $l={exact:(i,e)=>e.some(t=>i.some(s=>t===s)),is_not:(i,e)=>e.every(t=>i.every(s=>t!==s)),regex:(i,e)=>e.some(t=>i.some(s=>yt(t,s))),not_regex:(i,e)=>e.every(t=>i.every(s=>!yt(t,s))),icontains:(i,e)=>e.map(Zt).some(t=>i.map(Zt).some(s=>t.includes(s))),not_icontains:(i,e)=>e.map(Zt).every(t=>i.map(Zt).every(s=>!t.includes(s)))},Zt=i=>i.toLowerCase(),Tr=q("[Error tracking]");class Il{constructor(e){var t,s;this.pe=[],this._instance=e,this.pe=(t=(s=this._instance.persistence)==null?void 0:s.get_property(ei))!==null&&t!==void 0?t:[]}onRemoteConfig(e){var t,s,r,n=(t=(s=e.errorTracking)==null?void 0:s.suppressionRules)!==null&&t!==void 0?t:[],a=(r=e.errorTracking)==null?void 0:r.captureExtensionExceptions;this.pe=n,this._instance.persistence&&this._instance.persistence.register({[ei]:this.pe,[Qi]:a})}get ge(){var e,t=!!this._instance.get_property(Qi),s=this._instance.config.error_tracking.captureExtensionExceptions;return(e=s??t)!==null&&e!==void 0&&e}sendExceptionEvent(e){if(this._e(e))Tr.info("Skipping exception capture because a suppression rule matched");else{if(this.ge||!this.me(e))return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"});Tr.info("Skipping exception capture because it was thrown by an extension")}}_e(e){var t=e.$exception_list;if(!t||!A(t)||t.length===0)return!1;var s=t.reduce((r,n)=>{var{type:a,value:o}=n;return D(a)&&a.length>0&&r.$exception_types.push(a),D(o)&&o.length>0&&r.$exception_values.push(o),r},{$exception_types:[],$exception_values:[]});return this.pe.some(r=>{var n=r.values.map(a=>{var o,l=$l[a.operator],c=A(a.value)?a.value:[a.value],u=(o=s[a.key])!==null&&o!==void 0?o:[];return c.length>0&&l(c,u)});return r.type==="OR"?n.some(Boolean):n.every(Boolean)})}me(e){var t=e.$exception_list;return!(!t||!A(t))&&t.flatMap(s=>{var r,n;return(r=(n=s.stacktrace)==null?void 0:n.frames)!==null&&r!==void 0?r:[]}).some(s=>s.filename&&s.filename.startsWith("chrome-extension://"))}}var ue="Mobile",bs="iOS",ke="Android",Bt="Tablet",Gn=ke+" "+Bt,Wn="iPad",Vn="Apple",Yn=Vn+" Watch",qt="Safari",bt="BlackBerry",Xn="Samsung",Jn=Xn+"Browser",Kn=Xn+" Internet",rt="Chrome",jl=rt+" OS",Zn=rt+" "+bs,Ai="Internet Explorer",Qn=Ai+" "+ue,Ti="Opera",Nl=Ti+" Mini",Mi="Edge",ea="Microsoft "+Mi,gt="Firefox",ta=gt+" "+bs,Ut="Nintendo",zt="PlayStation",ft="Xbox",sa=ke+" "+ue,ia=ue+" "+qt,Mt="Windows",mi=Mt+" Phone",Mr="Nokia",yi="Ouya",ra="Generic",Pl=ra+" "+ue.toLowerCase(),na=ra+" "+Bt.toLowerCase(),bi="Konqueror",J="(\\d+(\\.\\d+)?)",Us=new RegExp("Version/"+J),Cl=new RegExp(ft,"i"),Fl=new RegExp(zt+" \\w+","i"),Rl=new RegExp(Ut+" \\w+","i"),Oi=new RegExp(bt+"|PlayBook|BB10","i"),Al={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},Tl=(i,e)=>e&&j(e,Vn)||function(t){return j(t,qt)&&!j(t,rt)&&!j(t,ke)}(i),aa=function(i,e){return e=e||"",j(i," OPR/")&&j(i,"Mini")?Nl:j(i," OPR/")?Ti:Oi.test(i)?bt:j(i,"IE"+ue)||j(i,"WPDesktop")?Qn:j(i,Jn)?Kn:j(i,Mi)||j(i,"Edg/")?ea:j(i,"FBIOS")?"Facebook "+ue:j(i,"UCWEB")||j(i,"UCBrowser")?"UC Browser":j(i,"CriOS")?Zn:j(i,"CrMo")||j(i,rt)?rt:j(i,ke)&&j(i,qt)?sa:j(i,"FxiOS")?ta:j(i.toLowerCase(),bi.toLowerCase())?bi:Tl(i,e)?j(i,ue)?ia:qt:j(i,gt)?gt:j(i,"MSIE")||j(i,"Trident/")?Ai:j(i,"Gecko")?gt:""},Ml={[Qn]:[new RegExp("rv:"+J)],[ea]:[new RegExp(Mi+"?\\/"+J)],[rt]:[new RegExp("("+rt+"|CrMo)\\/"+J)],[Zn]:[new RegExp("CriOS\\/"+J)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+J)],[qt]:[Us],[ia]:[Us],[Ti]:[new RegExp("(Opera|OPR)\\/"+J)],[gt]:[new RegExp(gt+"\\/"+J)],[ta]:[new RegExp("FxiOS\\/"+J)],[bi]:[new RegExp("Konqueror[:/]?"+J,"i")],[bt]:[new RegExp(bt+" "+J),Us],[sa]:[new RegExp("android\\s"+J,"i")],[Kn]:[new RegExp(Jn+"\\/"+J)],[Ai]:[new RegExp("(rv:|MSIE )"+J)],Mozilla:[new RegExp("rv:"+J)]},Ol=function(i,e){var t=aa(i,e),s=Ml[t];if(m(s))return null;for(var r=0;r<s.length;r++){var n=s[r],a=i.match(n);if(a)return parseFloat(a[a.length-2])}return null},Or=[[new RegExp(ft+"; "+ft+" (.*?)[);]","i"),i=>[ft,i&&i[1]||""]],[new RegExp(Ut,"i"),[Ut,""]],[new RegExp(zt,"i"),[zt,""]],[Oi,[bt,""]],[new RegExp(Mt,"i"),(i,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[mi,""];if(new RegExp(ue).test(e)&&!/IEMobile\b/.test(e))return[Mt+" "+ue,""];var t=/Windows NT ([0-9.]+)/i.exec(e);if(t&&t[1]){var s=t[1],r=Al[s]||"";return/arm/i.test(e)&&(r="RT"),[Mt,r]}return[Mt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,i=>{if(i&&i[3]){var e=[i[3],i[4],i[5]||"0"];return[bs,e.join(".")]}return[bs,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,i=>{var e="";return i&&i.length>=3&&(e=m(i[2])?i[3]:i[2]),["watchOS",e]}],[new RegExp("("+ke+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+ke+")","i"),i=>{if(i&&i[2]){var e=[i[2],i[3],i[4]||"0"];return[ke,e.join(".")]}return[ke,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,i=>{var e=["Mac OS X",""];if(i&&i[1]){var t=[i[1],i[2],i[3]||"0"];e[1]=t.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[jl,""]],[/Linux|debian/i,["Linux",""]]],Lr=function(i){return Rl.test(i)?Ut:Fl.test(i)?zt:Cl.test(i)?ft:new RegExp(yi,"i").test(i)?yi:new RegExp("("+mi+"|WPDesktop)","i").test(i)?mi:/iPad/.test(i)?Wn:/iPod/.test(i)?"iPod Touch":/iPhone/.test(i)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(i)?Yn:Oi.test(i)?bt:/(kobo)\s(ereader|touch)/i.test(i)?"Kobo":new RegExp(Mr,"i").test(i)?Mr:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(i)||/(kf[a-z]+)( bui|\)).+silk\//i.test(i)?"Kindle Fire":/(Android|ZTE)/i.test(i)?!new RegExp(ue).test(i)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(i)?/pixel[\daxl ]{1,6}/i.test(i)&&!/pixel c/i.test(i)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(i)||/lmy47v/i.test(i)&&!/QTAQZ3/i.test(i)?ke:Gn:ke:new RegExp("(pda|"+ue+")","i").test(i)?Pl:new RegExp(Bt,"i").test(i)&&!new RegExp(Bt+" pc","i").test(i)?na:""},Qt="https?://(.*)",$s=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],Ll=ks(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],$s),Li="<masked>",Dl=["li_fat_id"];function oa(i,e,t){if(!w)return{};var s,r=e?ks([],$s,t||[]):[],n=la(Ii(w.URL,r,Li),i),a=(s={},F(Dl,function(o){var l=Ee.V(o);s[o]=l||null}),s);return H(a,n)}function la(i,e){var t=Ll.concat(e||[]),s={};return F(t,function(r){var n=ps(i,r);s[r]=n||null}),s}function ca(i){var e=function(n){return n?n.search(Qt+"google.([^/?]*)")===0?"google":n.search(Qt+"bing.com")===0?"bing":n.search(Qt+"yahoo.com")===0?"yahoo":n.search(Qt+"duckduckgo.com")===0?"duckduckgo":null:null}(i),t=e!="yahoo"?"q":"p",s={};if(!Ye(e)){s.$search_engine=e;var r=w?ps(w.referrer,t):"";r.length&&(s.ph_keyword=r)}return s}function Dr(){return navigator.language||navigator.userLanguage}function ua(){return(w==null?void 0:w.referrer)||"$direct"}function da(i,e){var t=i?ks([],$s,e||[]):[],s=Z==null?void 0:Z.href.substring(0,1e3);return{r:ua().substring(0,1e3),u:s?Ii(s,t,Li):void 0}}function ha(i){var e,{r:t,u:s}=i,r={$referrer:t,$referring_domain:t==null?void 0:t=="$direct"?"$direct":(e=_t(t))==null?void 0:e.host};if(s){r.$current_url=s;var n=_t(s);r.$host=n==null?void 0:n.host,r.$pathname=n==null?void 0:n.pathname;var a=la(s);H(r,a)}if(t){var o=ca(t);H(r,o)}return r}function pa(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Hl(){try{return new Date().getTimezoneOffset()}catch{return}}function Bl(i,e){if(!K)return{};var t,s,r,n=i?ks([],$s,e||[]):[],[a,o]=function(l){for(var c=0;c<Or.length;c++){var[u,p]=Or[c],h=u.exec(l),g=h&&(le(p)?p(h,l):p);if(g)return g}return["",""]}(K);return H(Si({$os:a,$os_version:o,$browser:aa(K,navigator.vendor),$device:Lr(K),$device_type:(s=K,r=Lr(s),r===Wn||r===Gn||r==="Kobo"||r==="Kindle Fire"||r===na?Bt:r===Ut||r===ft||r===zt||r===yi?"Console":r===Yn?"Wearable":r?ue:"Desktop"),$timezone:pa(),$timezone_offset:Hl()}),{$current_url:Ii(Z==null?void 0:Z.href,n,Li),$host:Z==null?void 0:Z.host,$pathname:Z==null?void 0:Z.pathname,$raw_user_agent:K.length>1e3?K.substring(0,997)+"...":K,$browser_version:Ol(K,navigator.vendor),$browser_language:Dr(),$browser_language_prefix:(t=Dr(),typeof t=="string"?t.split("-")[0]:void 0),$screen_height:f==null?void 0:f.screen.height,$screen_width:f==null?void 0:f.screen.width,$viewport_height:f==null?void 0:f.innerHeight,$viewport_width:f==null?void 0:f.innerWidth,$lib:"web",$lib_version:Te.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var we=q("[FeatureFlags]"),zs="$active_feature_flags",lt="$override_feature_flags",Hr="$feature_flag_payloads",It="$override_feature_flag_payloads",Br="$feature_flag_request_id",qr=i=>{var e={};for(var[t,s]of is(i||{}))s&&(e[t]=s);return e},ql=i=>{var e=i.flags;return e?(i.featureFlags=Object.fromEntries(Object.keys(e).map(t=>{var s;return[t,(s=e[t].variant)!==null&&s!==void 0?s:e[t].enabled]})),i.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(t=>e[t].enabled).filter(t=>{var s;return(s=e[t].metadata)==null?void 0:s.payload}).map(t=>{var s;return[t,(s=e[t].metadata)==null?void 0:s.payload]}))):we.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),i},Ul=function(i){return i.FeatureFlags="feature_flags",i.Recordings="recordings",i}({});class zl{constructor(e){this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this.$e=!1,this.xe=!1,this.ke=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.xe=!0;else{var e=!this.Ee&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.Ie({disableFlags:e})}}get hasLoadedFlags(){return this.ye}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(ii),t=this._instance.get_property(lt),s=this._instance.get_property(It);if(!s&&!t)return e||{};var r=H({},e||{}),n=[...new Set([...Object.keys(s||{}),...Object.keys(t||{})])];for(var a of n){var o,l,c=r[a],u=t==null?void 0:t[a],p=m(u)?(o=c==null?void 0:c.enabled)!==null&&o!==void 0&&o:!!u,h=m(u)?c.variant:typeof u=="string"?u:void 0,g=s==null?void 0:s[a],v=y({},c,{enabled:p,variant:p?h??(c==null?void 0:c.variant):void 0});p!==(c==null?void 0:c.enabled)&&(v.original_enabled=c==null?void 0:c.enabled),h!==(c==null?void 0:c.variant)&&(v.original_variant=c==null?void 0:c.variant),g&&(v.metadata=y({},c==null?void 0:c.metadata,{payload:g,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[a]=v}return this.be||(we.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:s,finalDetails:r}),this.be=!0),r}getFlagVariants(){var e=this._instance.get_property(ht),t=this._instance.get_property(lt);if(!t)return e||{};for(var s=H({},e),r=Object.keys(t),n=0;n<r.length;n++)s[r[n]]=t[r[n]];return this.be||(we.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:s}),this.be=!0),s}getFlagPayloads(){var e=this._instance.get_property(Hr),t=this._instance.get_property(It);if(!t)return e||{};for(var s=H({},e||{}),r=Object.keys(t),n=0;n<r.length;n++)s[r[n]]=t[r[n]];return this.be||(we.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:s}),this.be=!0),s}reloadFeatureFlags(){this.Se||this._instance.config.advanced_disable_feature_flags||this.Ee||(this.Ee=setTimeout(()=>{this.Ie()},5))}Pe(){clearTimeout(this.Ee),this.Ee=void 0}ensureFlagsLoaded(){this.ye||this.we||this.Ee||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.Se=e}Ie(e){var t;if(this.Pe(),!this._instance.L())if(this.we)this.$e=!0;else{var s={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:y({},((t=this._instance.persistence)==null?void 0:t.get_initial_props())||{},this._instance.get_property(Rt)||{}),group_properties:this._instance.get_property(et)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(s.disable_flags=!0);var r=this._instance.config.__preview_remote_config,n=r?"/flags/?v=2":"/flags/?v=2&config=true",a=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",o=this._instance.requestRouter.endpointFor("api",n+a);r&&(s.timezone=pa()),this.we=!0,this._instance.Re({method:"POST",url:o,data:s,compression:this._instance.config.disable_compression?void 0:Me.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,p=!0;if(l.statusCode===200&&(this.$e||(this.$anon_distinct_id=void 0),p=!1),this.we=!1,this.xe||(this.xe=!0,this._instance.Te((u=l.json)!==null&&u!==void 0?u:{})),!s.disable_flags||this.$e)if(this.ke=!p,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(Ul.FeatureFlags))we.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var h;s.disable_flags||this.receivedFeatureFlags((h=l.json)!==null&&h!==void 0?h:{},p),this.$e&&(this.$e=!1,this.Ie())}}})}}getFeatureFlag(e,t){if(t===void 0&&(t={}),this.ye||this.getFlags()&&this.getFlags().length>0){var s=this.getFlagVariants()[e],r=""+s,n=this._instance.get_property(Br)||void 0,a=this._instance.get_property(cs)||{};if((t.send_event||!("send_event"in t))&&(!(e in a)||!a[e].includes(r))){var o,l,c,u,p,h,g,v,_;A(a[e])?a[e].push(r):a[e]=[r],(o=this._instance.persistence)==null||o.register({[cs]:a});var x=this.getFeatureFlagDetails(e),k={$feature_flag:e,$feature_flag_response:s,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:n,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.ke};m(x==null||(u=x.metadata)==null?void 0:u.version)||(k.$feature_flag_version=x.metadata.version);var $,S=(p=x==null||(h=x.reason)==null?void 0:h.description)!==null&&p!==void 0?p:x==null||(g=x.reason)==null?void 0:g.code;S&&(k.$feature_flag_reason=S),x!=null&&(v=x.metadata)!=null&&v.id&&(k.$feature_flag_id=x.metadata.id),m(x==null?void 0:x.original_variant)&&m(x==null?void 0:x.original_enabled)||(k.$feature_flag_original_response=m(x.original_variant)?x.original_enabled:x.original_variant),x!=null&&(_=x.metadata)!=null&&_.original_payload&&(k.$feature_flag_original_payload=x==null||($=x.metadata)==null?void 0:$.original_payload),this._instance.capture("$feature_flag_called",k)}return s}we.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var s=this._instance.config.token;this._instance.Re({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:s},compression:this._instance.config.disable_compression?void 0:Me.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var n,a=(n=r.json)==null?void 0:n.featureFlagPayloads;t((a==null?void 0:a[e])||void 0)}})}isFeatureEnabled(e,t){if(t===void 0&&(t={}),this.ye||this.getFlags()&&this.getFlags().length>0){var s=this.getFeatureFlag(e,t);return m(s)?void 0:!!s}we.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ye=!0;var s=this.getFlagVariants(),r=this.getFlagPayloads(),n=this.getFlagsWithDetails();(function(a,o,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var p=ql(a),h=p.flags,g=p.featureFlags,v=p.featureFlagPayloads;if(g){var _=a.requestId;if(A(g)){we.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var x={};if(g)for(var k=0;k<g.length;k++)x[g[k]]=!0;o&&o.register({[zs]:g,[ht]:x})}else{var $=g,S=v,I=h;a.errorsWhileComputingFlags&&($=y({},l,$),S=y({},c,S),I=y({},u,I)),o&&o.register(y({[zs]:Object.keys(qr($)),[ht]:$||{},[Hr]:S||{},[ii]:I||{}},_?{[Br]:_}:{}))}}})(e,this._instance.persistence,s,r,n),this.Ce(t)}}override(e,t){t===void 0&&(t=!1),we.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return we.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(lt),this._instance.persistence.unregister(It),void this.Ce();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var t,s=e;if(this.be=!!((t=s.suppressWarning)!==null&&t!==void 0&&t),"flags"in s){if(s.flags===!1)this._instance.persistence.unregister(lt);else if(s.flags)if(A(s.flags)){for(var r={},n=0;n<s.flags.length;n++)r[s.flags[n]]=!0;this._instance.persistence.register({[lt]:r})}else this._instance.persistence.register({[lt]:s.flags})}return"payloads"in s&&(s.payloads===!1?this._instance.persistence.unregister(It):s.payloads&&this._instance.persistence.register({[It]:s.payloads})),void this.Ce()}this.Ce()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ye){var{flags:t,flagVariants:s}=this.Me();e(t,s)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,s){var r,n=(this._instance.get_property(Ft)||[]).find(c=>c.flagKey===e),a={["$feature_enrollment/"+e]:t},o={$feature_flag:e,$feature_enrollment:t,$set:a};n&&(o.$early_access_feature_name=n.name),s&&(o.$feature_enrollment_stage=s),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(a,!1);var l=y({},this.getFlagVariants(),{[e]:t});(r=this._instance.persistence)==null||r.register({[zs]:Object.keys(qr(l)),[ht]:l}),this.Ce()}getEarlyAccessFeatures(e,t,s){t===void 0&&(t=!1);var r=this._instance.get_property(Ft),n=s?"&"+s.map(a=>"stage="+a).join("&"):"";if(r&&!t)return e(r);this._instance.Re({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+n),method:"GET",callback:a=>{var o,l;if(a.json){var c=a.json.earlyAccessFeatures;return(o=this._instance.persistence)==null||o.unregister(Ft),(l=this._instance.persistence)==null||l.register({[Ft]:c}),e(c)}}})}Me(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(s=>t[s]),flagVariants:Object.keys(t).filter(s=>t[s]).reduce((s,r)=>(s[r]=t[r],s),{})}}Ce(e){var{flags:t,flagVariants:s}=this.Me();this.featureFlagEventHandlers.forEach(r=>r(t,s,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0);var s=this._instance.get_property(Rt)||{};this._instance.register({[Rt]:y({},s,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Rt)}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0);var s=this._instance.get_property(et)||{};Object.keys(s).length!==0&&Object.keys(s).forEach(r=>{s[r]=y({},s[r],e[r]),delete e[r]}),this._instance.register({[et]:y({},s,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(et)||{};this._instance.register({[et]:y({},t,{[e]:{}})})}else this._instance.unregister(et)}reset(){this.ye=!1,this.we=!1,this.Se=!1,this.$e=!1,this.xe=!1,this.ke=!1,this.$anon_distinct_id=void 0,this.Pe(),this.be=!1}}var Gl=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Gs{constructor(e,t){this.A=e,this.props={},this.Oe=!1,this.Fe=(s=>{var r="";return s.token&&(r=s.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),s.persistence_name?"ph_"+s.persistence_name:"ph_"+r+"_posthog"})(e),this.it=this.Ae(e),this.load(),e.debug&&b.info("Persistence loaded",e.persistence,y({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.De}Ae(e){Gl.indexOf(e.persistence.toLowerCase())===-1&&(b.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return t==="localstorage"&&B.G()?B:t==="localstorage+cookie"&&Wt.G()?Wt:t==="sessionstorage"&&G.G()?G:t==="memory"?So:t==="cookie"?Ee:Wt.G()?Wt:Ee}properties(){var e={};return F(this.props,function(t,s){if(s===ht&&L(t))for(var r=Object.keys(t),n=0;n<r.length;n++)e["$feature/"+r[n]]=t[r[n]];else o=s,l=!1,(Ye(a=io)?l:Vi&&a.indexOf===Vi?a.indexOf(o)!=-1:(F(a,function(c){if(l||(l=c===o))return as}),l))||(e[s]=t);var a,o,l}),e}load(){if(!this.De){var e=this.it.K(this.Fe);e&&(this.props=H({},e))}}save(){this.De||this.it.Y(this.Fe,this.props,this.je,this.Le,this.Ne,this.A.debug)}remove(){this.it.X(this.Fe,!1),this.it.X(this.Fe,!0)}clear(){this.remove(),this.props={}}register_once(e,t,s){if(L(e)){m(t)&&(t="None"),this.je=m(s)?this.ze:s;var r=!1;if(F(e,(n,a)=>{this.props.hasOwnProperty(a)&&this.props[a]!==t||(this.props[a]=n,r=!0)}),r)return this.save(),!0}return!1}register(e,t){if(L(e)){this.je=m(t)?this.ze:t;var s=!1;if(F(e,(r,n)=>{e.hasOwnProperty(n)&&this.props[n]!==r&&(this.props[n]=r,s=!0)}),s)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Oe){var e=oa(this.A.custom_campaign_params,this.A.mask_personal_data_properties,this.A.custom_personal_data_properties);dt(Si(e))||this.register(e),this.Oe=!0}}update_search_keyword(){var e;this.register((e=w==null?void 0:w.referrer)?ca(e):{})}update_referrer_info(){var e;this.register_once({$referrer:ua(),$referring_domain:w!=null&&w.referrer&&((e=_t(w.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[oi]||this.props[li]||this.register_once({[us]:da(this.A.mask_personal_data_properties,this.A.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};F([li,oi],a=>{var o=this.props[a];o&&F(o,function(l,c){e["$initial_"+Ks(c)]=l})});var t,s,r=this.props[us];if(r){var n=(t=ha(r),s={},F(t,function(a,o){s["$initial_"+Ks(o)]=a}),s);H(e,n)}return e}safe_merge(e){return F(this.props,function(t,s){s in e||(e[s]=t)}),e}update_config(e,t,s){if(this.ze=this.je=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!s),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var r=this.Ae(e),n=this.props;this.clear(),this.it=r,this.props=n,this.save()}}set_disabled(e){this.De=e,this.De?this.remove():this.save()}set_cross_subdomain(e){e!==this.Le&&(this.Le=e,this.remove(),this.save())}set_secure(e){e!==this.Ne&&(this.Ne=e,this.remove(),this.save())}set_event_timer(e,t){var s=this.props[Pt]||{};s[e]=t,this.props[Pt]=s,this.save()}remove_event_timer(e){var t=(this.props[Pt]||{})[e];return m(t)||(delete this.props[Pt][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}(function(i){return i.Button="button",i.Tab="tab",i.Selector="selector",i})({});(function(i){return i.TopLeft="top_left",i.TopRight="top_right",i.TopCenter="top_center",i.MiddleLeft="middle_left",i.MiddleRight="middle_right",i.MiddleCenter="middle_center",i.Left="left",i.Center="center",i.Right="right",i.NextToTrigger="next_to_trigger",i})({});var Ws=function(i){return i.Popover="popover",i.API="api",i.Widget="widget",i.ExternalSurvey="external_survey",i}({});(function(i){return i.Open="open",i.MultipleChoice="multiple_choice",i.SingleChoice="single_choice",i.Rating="rating",i.Link="link",i})({});(function(i){return i.NextQuestion="next_question",i.End="end",i.ResponseBased="response_based",i.SpecificQuestion="specific_question",i})({});(function(i){return i.Once="once",i.Recurring="recurring",i.Always="always",i})({});var Vs=function(i){return i.SHOWN="survey shown",i.DISMISSED="survey dismissed",i.SENT="survey sent",i}({}),Ur=function(i){return i.SURVEY_ID="$survey_id",i.SURVEY_NAME="$survey_name",i.SURVEY_RESPONSE="$survey_response",i.SURVEY_ITERATION="$survey_iteration",i.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",i.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",i.SURVEY_SUBMISSION_ID="$survey_submission_id",i.SURVEY_QUESTIONS="$survey_questions",i.SURVEY_COMPLETED="$survey_completed",i}({}),ga=function(i){return i.Popover="popover",i.Inline="inline",i}({});class fa{constructor(){this.Ue={},this.Ue={}}on(e,t){return this.Ue[e]||(this.Ue[e]=[]),this.Ue[e].push(t),()=>{this.Ue[e]=this.Ue[e].filter(s=>s!==t)}}emit(e,t){for(var s of this.Ue[e]||[])s(t);for(var r of this.Ue["*"]||[])r(e,t)}}class tt{constructor(e){this.qe=new fa,this.Be=(t,s)=>this.He(t,s)&&this.We(t,s)&&this.Ge(t,s),this.He=(t,s)=>s==null||!s.event||(t==null?void 0:t.event)===(s==null?void 0:s.event),this._instance=e,this.Je=new Set,this.Ve=new Set}init(){var e;if(!m((e=this._instance)==null?void 0:e.Ke)){var t;(t=this._instance)==null||t.Ke((s,r)=>{this.on(s,r)})}}register(e){var t,s;if(!m((t=this._instance)==null?void 0:t.Ke)&&(e.forEach(a=>{var o,l;(o=this.Ve)==null||o.add(a),(l=a.steps)==null||l.forEach(c=>{var u;(u=this.Je)==null||u.add((c==null?void 0:c.event)||"")})}),(s=this._instance)!=null&&s.autocapture)){var r,n=new Set;e.forEach(a=>{var o;(o=a.steps)==null||o.forEach(l=>{l!=null&&l.selector&&n.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(n)}}on(e,t){var s;t!=null&&e.length!=0&&(this.Je.has(e)||this.Je.has(t==null?void 0:t.event))&&this.Ve&&((s=this.Ve)==null?void 0:s.size)>0&&this.Ve.forEach(r=>{this.Ye(t,r)&&this.qe.emit("actionCaptured",r.name)})}Xe(e){this.onAction("actionCaptured",t=>e(t))}Ye(e,t){if((t==null?void 0:t.steps)==null)return!1;for(var s of t.steps)if(this.Be(e,s))return!0;return!1}onAction(e,t){return this.qe.on(e,t)}We(e,t){if(t!=null&&t.url){var s,r=e==null||(s=e.properties)==null?void 0:s.$current_url;if(!r||typeof r!="string"||!tt.Qe(r,t==null?void 0:t.url,(t==null?void 0:t.url_matching)||"contains"))return!1}return!0}static Qe(e,t,s){switch(s){case"regex":return!!f&&yt(e,t);case"exact":return t===e;case"contains":var r=tt.Ze(t).replace(/_/g,".").replace(/%/g,".*");return yt(e,r);default:return!1}}static Ze(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Ge(e,t){if((t!=null&&t.href||t!=null&&t.tag_name||t!=null&&t.text)&&!this.tr(e).some(n=>!(t!=null&&t.href&&!tt.Qe(n.href||"",t==null?void 0:t.href,(t==null?void 0:t.href_matching)||"exact"))&&(t==null||!t.tag_name||n.tag_name===(t==null?void 0:t.tag_name))&&!(t!=null&&t.text&&!tt.Qe(n.text||"",t==null?void 0:t.text,(t==null?void 0:t.text_matching)||"exact")&&!tt.Qe(n.$el_text||"",t==null?void 0:t.text,(t==null?void 0:t.text_matching)||"exact"))))return!1;if(t!=null&&t.selector){var s,r=e==null||(s=e.properties)==null?void 0:s.$element_selectors;if(!r||!r.includes(t==null?void 0:t.selector))return!1}return!0}tr(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var R=q("[Surveys]"),wi="seenSurvey_",Wl=(i,e)=>{var t="$survey_"+e+"/"+i.id;return i.current_iteration&&i.current_iteration>0&&(t="$survey_"+e+"/"+i.id+"/"+i.current_iteration),t},zr=i=>{var e=""+wi+i.id;return i.current_iteration&&i.current_iteration>0&&(e=""+wi+i.id+"_"+i.current_iteration),e},Vl=[Ws.Popover,Ws.Widget,Ws.API],Yl={ignoreConditions:!1,ignoreDelay:!1,displayType:ga.Popover};class Xl{constructor(e){this._instance=e,this.ir=new Map,this.er=new Map}register(e){var t;m((t=this._instance)==null?void 0:t.Ke)||(this.rr(e),this.sr(e))}sr(e){var t=e.filter(s=>{var r,n;return((r=s.conditions)==null?void 0:r.actions)&&((n=s.conditions)==null||(n=n.actions)==null||(n=n.values)==null?void 0:n.length)>0});t.length!==0&&(this.nr==null&&(this.nr=new tt(this._instance),this.nr.init(),this.nr.Xe(s=>{this.onAction(s)})),t.forEach(s=>{var r,n,a,o,l;s.conditions&&(r=s.conditions)!=null&&r.actions&&(n=s.conditions)!=null&&(n=n.actions)!=null&&n.values&&((a=s.conditions)==null||(a=a.actions)==null||(a=a.values)==null?void 0:a.length)>0&&((o=this.nr)==null||o.register(s.conditions.actions.values),(l=s.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.er.get(c.name);u&&u.push(s.id),this.er.set(c.name,u||[s.id])}}))}))}rr(e){var t;e.filter(s=>{var r,n;return((r=s.conditions)==null?void 0:r.events)&&((n=s.conditions)==null||(n=n.events)==null||(n=n.values)==null?void 0:n.length)>0}).length!==0&&((t=this._instance)==null||t.Ke((s,r)=>{this.onEvent(s,r)}),e.forEach(s=>{var r;(r=s.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(n=>{if(n&&n.name){var a=this.ir.get(n.name);a&&a.push(s.id),this.ir.set(n.name,a||[s.id])}})}))}onEvent(e,t){var s,r=((s=this._instance)==null||(s=s.persistence)==null?void 0:s.props[Gt])||[];if(e==="survey shown"&&t&&r.length>0){var n;R.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:r});var a=t==null||(n=t.properties)==null?void 0:n.$survey_id;if(a){var o=r.indexOf(a);o>=0&&(r.splice(o,1),this.ar(r))}}else this.ir.has(e)&&(R.info("survey event matched, updating activated surveys",{event:e,surveys:this.ir.get(e)}),this.ar(r.concat(this.ir.get(e)||[])))}onAction(e){var t,s=((t=this._instance)==null||(t=t.persistence)==null?void 0:t.props[Gt])||[];this.er.has(e)&&this.ar(s.concat(this.er.get(e)||[]))}ar(e){var t;(t=this._instance)==null||(t=t.persistence)==null||t.register({[Gt]:[...new Set(e)]})}getSurveys(){var e,t=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[Gt];return t||[]}getEventToSurveys(){return this.ir}lr(){return this.nr}}class Jl{constructor(e){this.hr=void 0,this._surveyManager=null,this.ur=!1,this.dr=!1,this.vr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(C(t))return R.warn("Flags not loaded yet. Not loading surveys.");var s=A(t);this.hr=s?t.length>0:t,R.info("flags response received, isSurveysEnabled: "+this.hr),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var s=localStorage.key(t);(s!=null&&s.startsWith(wi)||s!=null&&s.startsWith("inProgressSurvey_"))&&e.push(s)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this._surveyManager)if(this.dr)R.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)R.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())R.info("Not loading surveys in cookieless mode without consent.");else{var e=E==null?void 0:E.__PosthogExtensions__;if(e){if(!m(this.hr)||this._instance.config.advanced_enable_surveys){var t=this.hr||this._instance.config.advanced_enable_surveys;this.dr=!0;try{var s=e.generateSurveys;if(s)return void this.cr(s,t);var r=e.loadExternalDependency;if(!r)return void this.pr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",n=>{n||!e.generateSurveys?this.pr("Could not load surveys script",n):this.cr(e.generateSurveys,t)})}catch(n){throw this.pr("Error initializing surveys",n),n}finally{this.dr=!1}}}else R.error("PostHog Extensions not found.")}}cr(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new Xl(this._instance),R.info("Surveys loaded successfully"),this.gr({isLoaded:!0})}pr(e,t){R.error(e,t),this.gr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.vr.push(e),this._surveyManager&&this.gr({isLoaded:!0}),()=>{this.vr=this.vr.filter(t=>t!==e)}}getSurveys(e,t){if(t===void 0&&(t=!1),this._instance.config.disable_surveys)return R.info("Disabled. Not loading surveys."),e([]);var s=this._instance.get_property(ri);if(s&&!t)return e(s,{isLoaded:!0});if(this.ur)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.ur=!0,this._instance.Re({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var n;this.ur=!1;var a=r.statusCode;if(a!==200||!r.json){var o="Surveys API could not be loaded, status: "+a;return R.error(o),e([],{isLoaded:!1,error:o})}var l,c=r.json.surveys||[],u=c.filter(p=>function(h){return!(!h.start_date||h.end_date)}(p)&&(function(h){var g;return!((g=h.conditions)==null||(g=g.events)==null||(g=g.values)==null||!g.length)}(p)||function(h){var g;return!((g=h.conditions)==null||(g=g.actions)==null||(g=g.values)==null||!g.length)}(p)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(n=this._instance.persistence)==null||n.register({[ri]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.ur=!1,r}}gr(e){for(var t of this.vr)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(s){R.error("Error in survey callback",s)}}getActiveMatchingSurveys(e,t){if(t===void 0&&(t=!1),!C(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);R.warn("init was not called")}_r(e){var t=null;return this.getSurveys(s=>{var r;t=(r=s.find(n=>n.id===e))!==null&&r!==void 0?r:null}),t}mr(e){if(C(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t=typeof e=="string"?this._r(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(C(this._surveyManager))return R.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.mr(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return C(this._surveyManager)?(R.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(s=>{this.getSurveys(r=>{var n,a=(n=r.find(l=>l.id===e))!==null&&n!==void 0?n:null;if(a){var o=this.mr(a);s({visible:o.eligible,disabledReason:o.reason})}else s({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t){var s;if(C(this._surveyManager))R.warn("init was not called");else{var r=typeof e=="string"?this._r(e):e;if(r!=null&&r.id)if(Vl.includes(r.type)){var n=w==null?void 0:w.querySelector(t);if(n)return(s=r.appearance)!=null&&s.surveyPopupDelaySeconds?(R.info("Rendering survey "+r.id+" with delay of "+r.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var a,o;R.info("Rendering survey "+r.id+" with delay of "+((a=r.appearance)==null?void 0:a.surveyPopupDelaySeconds)+" seconds"),(o=this._surveyManager)==null||o.renderSurvey(r,n),R.info("Survey "+r.id+" rendered")},1e3*r.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(r,n);R.warn("Survey element not found")}else R.warn("Surveys of type "+r.type+" cannot be rendered in the app");else R.warn("Survey not found")}}displaySurvey(e,t){var s;if(C(this._surveyManager))R.warn("init was not called");else{var r=this._r(e);if(r){var n=r;if((s=r.appearance)!=null&&s.surveyPopupDelaySeconds&&t.ignoreDelay&&(n=y({},r,{appearance:y({},r.appearance,{surveyPopupDelaySeconds:0})})),t.ignoreConditions===!1){var a=this.canRenderSurvey(r);if(!a.visible)return void R.warn("Survey is not eligible to be displayed: ",a.disabledReason)}t.displayType!==ga.Inline?this._surveyManager.handlePopoverSurvey(n):this.renderSurvey(n,t.selector)}else R.warn("Survey not found")}}}var Gr=q("[RateLimiter]");class Kl{constructor(e){var t,s;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var n=r.text;if(n&&n.length)try{(JSON.parse(n).quota_limited||[]).forEach(a=>{Gr.info((a||"events")+" is quota limited."),this.serverLimits[a]=new Date().getTime()+6e4})}catch(a){return void Gr.warn('could not rate limit - continuing. Error: "'+(a==null?void 0:a.message)+'"',{text:n})}},this.instance=e,this.captureEventsPerSecond=((t=e.config.rate_limiting)==null?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((s=e.config.rate_limiting)==null?void 0:s.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,s,r;e===void 0&&(e=!1);var n=new Date().getTime(),a=(t=(s=this.instance.persistence)==null?void 0:s.get_property(ai))!==null&&t!==void 0?t:{tokens:this.captureEventsBurstLimit,last:n};a.tokens+=(n-a.last)/1e3*this.captureEventsPerSecond,a.last=n,a.tokens>this.captureEventsBurstLimit&&(a.tokens=this.captureEventsBurstLimit);var o=a.tokens<1;return o||e||(a.tokens=Math.max(0,a.tokens-1)),!o||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,(r=this.instance.persistence)==null||r.set_property(ai,a),{isRateLimited:o,remainingTokens:a.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return t!==!1&&new Date().getTime()<t}}var Qe=q("[RemoteConfig]");class Zl{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=E._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}br(e){var t,s;(t=E.__PosthogExtensions__)!=null&&t.loadExternalDependency?(s=E.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Qe.error("PostHog Extensions not found. Cannot load remote config."),e())}yr(e){this._instance.Re({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return Qe.info("Using preloaded remote config",this.remoteConfig),void this.Te(this.remoteConfig);if(this._instance.L())return void Qe.warn("Remote config is disabled. Falling back to local config.");this.br(e=>{if(!e)return Qe.info("No config found after loading remote JS config. Falling back to JSON."),void this.yr(t=>{this.Te(t)});this.Te(e)})}catch(e){Qe.error("Error loading remote config",e)}}Te(e){e?this._instance.config.__preview_remote_config?(this._instance.Te(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Qe.info("__preview_remote_config is disabled. Logging config instead",e):Qe.error("Failed to fetch remote config from PostHog.")}}var xi=3e3;class Ql{constructor(e,t){this.wr=!0,this.Sr=[],this.$r=ne((t==null?void 0:t.flush_interval_ms)||xi,250,5e3,b.createLogger("flush interval"),xi),this.kr=e}enqueue(e){this.Sr.push(e),this.Er||this.Ir()}unload(){this.Pr();var e=this.Sr.length>0?this.Rr():{},t=Object.values(e);[...t.filter(s=>s.url.indexOf("/e")===0),...t.filter(s=>s.url.indexOf("/e")!==0)].map(s=>{this.kr(y({},s,{transport:"sendBeacon"}))})}enable(){this.wr=!1,this.Ir()}Ir(){var e=this;this.wr||(this.Er=setTimeout(()=>{if(this.Pr(),this.Sr.length>0){var t=this.Rr(),s=function(){var n=t[r],a=new Date().getTime();n.data&&A(n.data)&&F(n.data,o=>{o.offset=Math.abs(o.timestamp-a),delete o.timestamp}),e.kr(n)};for(var r in t)s()}},this.$r))}Pr(){clearTimeout(this.Er),this.Er=void 0}Rr(){var e={};return F(this.Sr,t=>{var s,r=t,n=(r?r.batchKey:null)||r.url;m(e[n])&&(e[n]=y({},r,{data:[]})),(s=e[n].data)==null||s.push(r.data)}),this.Sr=[],e}}var ec=["retriesPerformedSoFar"];class tc{constructor(e){this.Tr=!1,this.Cr=3e3,this.Sr=[],this._instance=e,this.Sr=[],this.Mr=!0,!m(f)&&"onLine"in f.navigator&&(this.Mr=f.navigator.onLine,O(f,"online",()=>{this.Mr=!0,this.ne()}),O(f,"offline",()=>{this.Mr=!1}))}get length(){return this.Sr.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,s=ln(e,ec);V(t)&&t>0&&(s.url=ys(s.url,{retry_count:t})),this._instance.Re(y({},s,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(t??0)<10?this.Or(y({retriesPerformedSoFar:t},s)):s.callback==null||s.callback(r)}}))}Or(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var s=function(a){var o=3e3*Math.pow(2,a),l=o/2,c=Math.min(18e5,o),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(t),r=Date.now()+s;this.Sr.push({retryAt:r,requestOptions:e});var n="Enqueued failed request for retry in "+s;navigator.onLine||(n+=" (Browser is offline)"),b.warn(n),this.Tr||(this.Tr=!0,this.Fr())}Fr(){this.Ar&&clearTimeout(this.Ar),this.Ar=setTimeout(()=>{this.Mr&&this.Sr.length>0&&this.ne(),this.Fr()},this.Cr)}ne(){var e=Date.now(),t=[],s=this.Sr.filter(n=>n.retryAt<e||(t.push(n),!1));if(this.Sr=t,s.length>0)for(var{requestOptions:r}of s)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Ar&&(clearTimeout(this.Ar),this.Ar=void 0),this.Sr))try{this._instance.Re(y({},e,{transport:"sendBeacon"}))}catch(t){b.error(t)}this.Sr=[]}}class sc{constructor(e){this.Dr=()=>{var t,s,r,n;this.jr||(this.jr={});var a=this.scrollElement(),o=this.scrollY(),l=a?Math.max(0,a.scrollHeight-a.clientHeight):0,c=o+((a==null?void 0:a.clientHeight)||0),u=(a==null?void 0:a.scrollHeight)||0;this.jr.lastScrollY=Math.ceil(o),this.jr.maxScrollY=Math.max(o,(t=this.jr.maxScrollY)!==null&&t!==void 0?t:0),this.jr.maxScrollHeight=Math.max(l,(s=this.jr.maxScrollHeight)!==null&&s!==void 0?s:0),this.jr.lastContentY=c,this.jr.maxContentY=Math.max(c,(r=this.jr.maxContentY)!==null&&r!==void 0?r:0),this.jr.maxContentHeight=Math.max(u,(n=this.jr.maxContentHeight)!==null&&n!==void 0?n:0)},this._instance=e}getContext(){return this.jr}resetContext(){var e=this.jr;return setTimeout(this.Dr,0),e}startMeasuringScrollPosition(){O(f,"scroll",this.Dr,{capture:!0}),O(f,"scrollend",this.Dr,{capture:!0}),O(f,"resize",this.Dr)}scrollElement(){if(!this._instance.config.scroll_root_selector)return f==null?void 0:f.document.documentElement;var e=A(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var s=f==null?void 0:f.document.querySelector(t);if(s)return s}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return f&&(f.scrollY||f.pageYOffset||f.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return f&&(f.scrollX||f.pageXOffset||f.document.documentElement.scrollLeft)||0}}var ic=i=>da(i==null?void 0:i.config.mask_personal_data_properties,i==null?void 0:i.config.custom_personal_data_properties);class Wr{constructor(e,t,s,r){this.Lr=n=>{var a=this.Nr();if(!a||a.sessionId!==n){var o={sessionId:n,props:this.zr(this._instance)};this.Ur.register({[ni]:o})}},this._instance=e,this.qr=t,this.Ur=s,this.zr=r||ic,this.qr.onSessionId(this.Lr)}Nr(){return this.Ur.props[ni]}getSetOnceProps(){var e,t=(e=this.Nr())==null?void 0:e.props;return t?"r"in t?ha(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return F(Si(this.getSetOnceProps()),(t,s)=>{s==="$current_url"&&(s="url"),e["$session_entry_"+Ks(s)]=t}),e}}var Ys=q("[SessionId]");class Vr{constructor(e,t,s){var r;if(this.Br=[],this.Hr=(u,p)=>Math.abs(u-p)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.A=e.config,this.Ur=e.persistence,this.pi=void 0,this.Ft=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Wr=t||ze,this.Gr=s||ze;var n=this.A.persistence_name||this.A.token,a=this.A.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ne(a,60,36e3,Ys.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Jr(),this.Vr="ph_"+n+"_window_id",this.Kr="ph_"+n+"_primary_window_exists",this.Yr()){var o=G.K(this.Vr),l=G.K(this.Kr);o&&!l?this.pi=o:G.X(this.Vr),G.Y(this.Kr,!0)}if((r=this.A.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var p=u.replace(/-/g,"");if(p.length!==32)throw new Error("Not a valid UUID");if(p[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(p.substring(0,12),16)})(this.A.bootstrap.sessionID);this.Xr(this.A.bootstrap.sessionID,new Date().getTime(),c)}catch(u){Ys.error("Invalid sessionID in bootstrap",u)}this.Qr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return m(this.Br)&&(this.Br=[]),this.Br.push(e),this.Ft&&e(this.Ft,this.pi),()=>{this.Br=this.Br.filter(t=>t!==e)}}Yr(){return this.A.persistence!=="memory"&&!this.Ur.De&&G.G()}Zr(e){e!==this.pi&&(this.pi=e,this.Yr()&&G.Y(this.Vr,e))}ts(){return this.pi?this.pi:this.Yr()?G.K(this.Vr):null}Xr(e,t,s){e===this.Ft&&t===this._sessionActivityTimestamp&&s===this._sessionStartTimestamp||(this._sessionStartTimestamp=s,this._sessionActivityTimestamp=t,this.Ft=e,this.Ur.register({[ls]:[t,e,s]}))}es(){if(this.Ft&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ft,this._sessionStartTimestamp];var e=this.Ur.props[ls];return A(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Xr(null,null,null)}Qr(){O(f,"beforeunload",()=>{this.Yr()&&G.X(this.Kr)},{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(e===void 0&&(e=!1),t===void 0&&(t=null),this.A.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var s=t||new Date().getTime(),[r,n,a]=this.es(),o=this.ts(),l=V(a)&&a>0&&Math.abs(s-a)>864e5,c=!1,u=!n,p=!e&&this.Hr(s,r);u||p||l?(n=this.Wr(),o=this.Gr(),Ys.info("new session ID generated",{sessionId:n,windowId:o,changeReason:{noSessionId:u,activityTimeout:p,sessionPastMaximumLength:l}}),a=s,c=!0):o||(o=this.Gr(),c=!0);var h=r===0||!e||l?s:r,g=a===0?new Date().getTime():a;return this.Zr(o),this.Xr(n,h,g),e||this.Jr(),c&&this.Br.forEach(v=>v(n,o,c?{noSessionId:u,activityTimeout:p,sessionPastMaximumLength:l}:void 0)),{sessionId:n,windowId:o,sessionStartTimestamp:g,changeReason:c?{noSessionId:u,activityTimeout:p,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Jr(){clearTimeout(this.rs),this.rs=setTimeout(()=>{var[e]=this.es();this.Hr(new Date().getTime(),e)&&this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var rc=["$set_once","$set"],qe=q("[SiteApps]");class nc{constructor(e){this._instance=e,this.ss=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}ns(e,t){if(t){var s=this.globalsForEvent(t);this.ss.push(s),this.ss.length>1e3&&(this.ss=this.ss.slice(10))}}get siteAppLoaders(){var e;return(e=E._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ke(this.ns.bind(this));this.os=()=>{e(),this.ss=[],this.os=void 0}}}globalsForEvent(e){var t,s,r,n,a,o,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],p=this._instance.get_property("$stored_group_properties")||{};for(var[h,g]of Object.entries(p))c[h]={id:u[h],type:h,properties:g};var{$set_once:v,$set:_}=e;return{event:y({},ln(e,rc),{properties:y({},e.properties,_?{$set:y({},(t=(s=e.properties)==null?void 0:s.$set)!==null&&t!==void 0?t:{},_)}:{},v?{$set_once:y({},(r=(n=e.properties)==null?void 0:n.$set_once)!==null&&r!==void 0?r:{},v)}:{}),elements_chain:(a=(o=e.properties)==null?void 0:o.$elements_chain)!==null&&a!==void 0?a:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var t=this.apps[e.id],s=()=>{var o;!t.errored&&this.ss.length&&(qe.info("Processing "+this.ss.length+" events for site app with id "+e.id),this.ss.forEach(l=>t.processEvent==null?void 0:t.processEvent(l)),t.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((o=this.os)==null||o.call(this))},r=!1,n=o=>{t.errored=!o,t.loaded=!0,qe.info("Site app with id "+e.id+" "+(o?"loaded":"errored")),r&&s()};try{var{processEvent:a}=e.init({posthog:this._instance,callback:o=>{n(o)}});a&&(t.processEvent=a),r=!0}catch(o){qe.error("Error while initializing PostHog app with config id "+e.id,o),n(!1)}if(r&&t.loaded)try{s()}catch(o){qe.error("Error while processing buffered events PostHog app with config id "+e.id,o),t.errored=!0}}ls(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var s of e)this.setupSiteApp(s)}hs(e){if(Object.keys(this.apps).length!==0){var t=this.globalsForEvent(e);for(var s of Object.values(this.apps))try{s.processEvent==null||s.processEvent(t)}catch(r){qe.error("Error while processing event "+e.event+" for site app "+s.id,r)}}}onRemoteConfig(e){var t,s,r,n=this;if((t=this.siteAppLoaders)!=null&&t.length)return this.isEnabled?(this.ls(),void this._instance.on("eventCaptured",c=>this.hs(c))):void qe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((s=this.os)==null||s.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var a=function(c){var u;E["__$$ph_site_app_"+c]=n._instance,(u=E.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(n._instance,l,p=>{if(p)return qe.error("Error while initializing PostHog app with config id "+c,p)})};for(var{id:o,url:l}of e.siteApps)a(o)}else qe.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var ac=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Yr=function(i,e){if(!i)return!1;var t=i.toLowerCase();return ac.concat(e||[]).some(s=>{var r=s.toLowerCase();return t.indexOf(r)!==-1})},va=function(i,e){if(!i)return!1;var t=i.userAgent;if(t&&Yr(t,e))return!0;try{var s=i==null?void 0:i.userAgentData;if(s!=null&&s.brands&&s.brands.some(r=>Yr(r==null?void 0:r.brand,e)))return!0}catch{}return!!i.webdriver},Ot=function(i){return i.US="us",i.EU="eu",i.CUSTOM="custom",i}({}),Xr="i.posthog.com";class oc{constructor(e){this.us={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,t=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+Xr,".posthog.com")),t==="https://app.posthog.com"?"https://us.posthog.com":t}get region(){return this.us[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.us[this.apiHost]=Ot.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.us[this.apiHost]=Ot.EU:this.us[this.apiHost]=Ot.CUSTOM),this.us[this.apiHost]}endpointFor(e,t){if(t===void 0&&(t=""),t&&(t=t[0]==="/"?t:"/"+t),e==="ui")return this.uiHost+t;if(this.region===Ot.CUSTOM)return this.apiHost+t;var s=Xr+t;switch(e){case"assets":return"https://"+this.region+"-assets."+s;case"api":return"https://"+this.region+"."+s}}}var lc={icontains:(i,e)=>!!f&&e.href.toLowerCase().indexOf(i.toLowerCase())>-1,not_icontains:(i,e)=>!!f&&e.href.toLowerCase().indexOf(i.toLowerCase())===-1,regex:(i,e)=>!!f&&yt(e.href,i),not_regex:(i,e)=>!!f&&!yt(e.href,i),exact:(i,e)=>e.href===i,is_not:(i,e)=>e.href!==i};class W{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(s){s===void 0&&(s=!1),t.getWebExperiments(r=>{W.ds("retrieved web experiments from the server"),t.vs=new Map,r.forEach(n=>{if(n.feature_flag_key){var a;t.vs&&(W.ds("setting flag key ",n.feature_flag_key," to web experiment ",n),(a=t.vs)==null||a.set(n.feature_flag_key,n));var o=t._instance.getFeatureFlag(n.feature_flag_key);D(o)&&n.variants[o]&&t.cs(n.name,o,n.variants[o].transforms)}else if(n.variants)for(var l in n.variants){var c=n.variants[l];W.fs(c)&&t.cs(n.name,l,c.transforms)}})},s)},this._instance=e,this._instance.onFeatureFlags(s=>{this.onFeatureFlags(s)})}onFeatureFlags(e){if(this._is_bot())W.ds("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(C(this.vs))return this.vs=new Map,this.loadIfEnabled(),void this.previewWebExperiment();W.ds("applying feature flags",e),e.forEach(t=>{var s;if(this.vs&&(s=this.vs)!=null&&s.has(t)){var r,n=this._instance.getFeatureFlag(t),a=(r=this.vs)==null?void 0:r.get(t);n&&a!=null&&a.variants[n]&&this.cs(a.name,n,a.variants[n].transforms)}})}}previewWebExperiment(){var e=W.getWindowLocation();if(e!=null&&e.search){var t=ps(e==null?void 0:e.search,"__experiment_id"),s=ps(e==null?void 0:e.search,"__experiment_variant");t&&s&&(W.ds("previewing web experiments "+t+" && "+s),this.getWebExperiments(r=>{this.ps(parseInt(t),s,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,s){if(this._instance.config.disable_web_experiments&&!s)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!t)return e(r);this._instance.Re({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:n=>{if(n.statusCode!==200||!n.json)return e([]);var a=n.json.experiments||[];return e(a)}})}ps(e,t,s){var r=s.filter(n=>n.id===e);r&&r.length>0&&(W.ds("Previewing web experiment ["+r[0].name+"] with variant ["+t+"]"),this.cs(r[0].name,t,r[0].variants[t].transforms))}static fs(e){return!C(e.conditions)&&W.gs(e)&&W._s(e)}static gs(e){var t;if(C(e.conditions)||C((t=e.conditions)==null?void 0:t.url))return!0;var s,r,n,a=W.getWindowLocation();return!!a&&((s=e.conditions)==null||!s.url||lc[(r=(n=e.conditions)==null?void 0:n.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,a))}static getWindowLocation(){return f==null?void 0:f.location}static _s(e){var t;if(C(e.conditions)||C((t=e.conditions)==null?void 0:t.utm))return!0;var s=oa();if(s.utm_source){var r,n,a,o,l,c,u,p,h=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((n=e.conditions)==null||(n=n.utm)==null?void 0:n.utm_campaign)==s.utm_campaign,g=(a=e.conditions)==null||(a=a.utm)==null||!a.utm_source||((o=e.conditions)==null||(o=o.utm)==null?void 0:o.utm_source)==s.utm_source,v=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==s.utm_medium,_=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((p=e.conditions)==null||(p=p.utm)==null?void 0:p.utm_term)==s.utm_term;return h&&v&&_&&g}return!1}static ds(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];b.info("[WebExperiments] "+e,s)}cs(e,t,s){this._is_bot()?W.ds("Refusing to render web experiment since the viewer is a likely bot"):t!=="control"?s.forEach(r=>{if(r.selector){var n;W.ds("applying transform of variant "+t+" for experiment "+e+" ",r);var a=(n=document)==null?void 0:n.querySelectorAll(r.selector);a==null||a.forEach(o=>{var l=o;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):W.ds("Control variants leave the page unmodified.")}_is_bot(){return re&&this._instance?va(re,this._instance.config.custom_blocked_useragents):void 0}}var cc=q("[PostHog ExternalIntegrations]"),uc={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class dc{constructor(e){this._instance=e}nt(e,t){var s;(s=E.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this._instance,e,r=>{if(r)return cc.error("failed to load script",r);t()})}startIfEnabledOrStop(){var e=this,t=function(a){var o,l,c;!r||(o=E.__PosthogExtensions__)!=null&&(o=o.integrations)!=null&&o[a]||e.nt(uc[a],()=>{var u;(u=E.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[a])==null||u.start(e._instance)}),!r&&(l=E.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[a]&&((c=E.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[a])==null||c.stop())};for(var[s,r]of Object.entries((n=this._instance.config.integrations)!==null&&n!==void 0?n:{})){var n;t(s)}}}var ki="[SessionRecording]",es=q(ki);class hc{get started(){var e;return!((e=this.bs)==null||!e.isStarted)}get status(){var e;return((e=this.bs)==null?void 0:e.status)||"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this._instance=e,!this._instance.sessionManager)throw es.error("started without valid sessionManager"),new Error(ki+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(ki+' cannot be used with cookieless_mode="always"')}get qt(){var e=!!this._instance.get_property(Ht),t=!this._instance.config.disable_session_recording,s=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return f&&e&&t&&!s}startIfEnabledOrStop(e){var t;if(!this.qt||(t=this.bs)==null||!t.isStarted){var s=!m(Object.assign)&&!m(Array.from);this.qt&&s?(this.ys(e),es.info("starting")):this.stopRecording()}}ys(e){var t,s,r;this.qt&&(E!=null&&(t=E.__PosthogExtensions__)!=null&&(t=t.rrweb)!=null&&t.record&&(s=E.__PosthogExtensions__)!=null&&s.initSessionRecording?this.Ii(e):(r=E.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,this.Pi,n=>{if(n)return es.error("could not load recorder",n);this.Ii(e)}))}stopRecording(){var e;(e=this.bs)==null||e.stop()}onRemoteConfig(e){this.ws=e;var t,s=this._instance.persistence;s&&s.register({[Ht]:!!e.sessionRecording,[os]:(t=e.sessionRecording)==null?void 0:t.scriptConfig}),this.bs?(this.bs.onRemoteConfig(e),this.ws=void 0):this.ys(),this.startIfEnabledOrStop()}log(e,t){var s;t===void 0&&(t="log"),(s=this.bs)!=null&&s.log?this.bs.log(e,t):es.warn("log called before recorder was ready")}get Pi(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(os))==null?void 0:e.script)||"lazy-recorder"}Ii(e){var t,s;if((t=E.__PosthogExtensions__)==null||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.bs||(this.bs=(s=E.__PosthogExtensions__)==null?void 0:s.initSessionRecording(this._instance),this.bs._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture,this.ws&&(this.bs.onRemoteConfig(this.ws),this.ws=void 0)),this.bs.start(e)}onRRwebEmit(e){var t;(t=this.bs)==null||t.onRRwebEmit==null||t.onRRwebEmit(e)}overrideLinkedFlag(){var e;(e=this.bs)==null||e.overrideLinkedFlag()}overrideSampling(){var e;(e=this.bs)==null||e.overrideSampling()}overrideTrigger(e){var t;(t=this.bs)==null||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return((e=this.bs)==null?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var s;return!((s=this.bs)==null||!s.tryAddCustomEvent(e,t))}}var Dt={},Ei=()=>{},ut="posthog",_a=!Sl&&(K==null?void 0:K.indexOf("MSIE"))===-1&&(K==null?void 0:K.indexOf("Mozilla"))===-1,Jr=i=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:so(w==null?void 0:w.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Ei,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:i!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:i??"unset",debug:Z&&D(Z==null?void 0:Z.search)&&Z.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(f==null||(e=f.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:t=>{var s="Bad HTTP status: "+t.statusCode+" "+t.text;b.error(s)},get_device_id:t=>t,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:xi},error_tracking:{},_onCapture:Ei,__preview_eager_load_replay:!0}},Kr=i=>{var e={};m(i.process_person)||(e.person_profiles=i.process_person),m(i.xhr_headers)||(e.request_headers=i.xhr_headers),m(i.cookie_name)||(e.persistence_name=i.cookie_name),m(i.disable_cookie)||(e.disable_persistence=i.disable_cookie),m(i.store_google)||(e.save_campaign_params=i.store_google),m(i.verbose)||(e.debug=i.verbose);var t=H({},e,i);return A(i.property_blacklist)&&(m(i.property_denylist)?t.property_denylist=i.property_blacklist:A(i.property_denylist)?t.property_denylist=[...i.property_blacklist,...i.property_denylist]:b.error("Invalid value for property_denylist config: "+i.property_denylist)),t};class pc{constructor(){this.__forceAllowLocalhost=!1}get Ss(){return this.__forceAllowLocalhost}set Ss(e){b.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Is{get decideEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,t;return(e=(t=this.featureFlags)==null?void 0:t.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new pc,this.$s=!1,this.version=Te.LIB_VERSION,this.xs=new fa,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Jr(),this.SentryIntegration=fl,this.sentryIntegration=e=>function(t,s){var r=zn(t,s);return{name:Un,processEvent:n=>r(n)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.ks=!1,this.Es=null,this.Is=null,this.Ps=null,this.featureFlags=new zl(this),this.toolbar=new _l(this),this.scrollManager=new sc(this),this.pageViewManager=new kl(this),this.surveys=new Jl(this),this.experiments=new W(this),this.exceptions=new Il(this),this.rateLimiter=new Kl(this),this.requestRouter=new oc(this),this.consent=new $o(this),this.externalIntegrations=new dc(this),this.people={set:(e,t,s)=>{var r=D(e)?{[e]:t}:e;this.setPersonProperties(r),s==null||s({})},set_once:(e,t,s)=>{var r=D(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),s==null||s({})}},this.on("eventCaptured",e=>b.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,t,s){if(s&&s!==ut){var r,n=(r=Dt[s])!==null&&r!==void 0?r:new Is;return n._init(e,t,s),Dt[s]=n,Dt[ut][s]=n,n}return this._init(e,t,s)}_init(e,t,s){var r,n;if(t===void 0&&(t={}),m(e)||Zs(e))return b.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return b.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.Rs=t,this.Ts=[],t.person_profiles&&(this.Is=t.person_profiles),this.set_config(H({},Jr(t.defaults),Kr(t),{name:s,token:e})),this.config.on_xhr_error&&b.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:Me.GZipJS;var a=this.Cs();this.persistence=new Gs(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Gs(y({},this.config,{persistence:"sessionStorage"}),a);var o=y({},this.persistence.props),l=y({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Ms=new Ql(S=>this.Os(S),this.config.request_queue_config),this.Fs=new tc(this),this.__request_queue=[];var c=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(c||(this.sessionManager=new Vr(this),this.sessionPropsManager=new Wr(this,this.sessionManager,this.persistence)),new yl(this).startIfEnabledOrStop(),this.siteApps=new nc(this),(r=this.siteApps)==null||r.init(),c||(this.config.__preview_eager_load_replay?this.sessionRecording=new jr(this):this.sessionRecording=new hc(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new mo(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new xl(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new bl(this),this.exceptionObserver=new No(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new Nn(this,jo),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new Uo(this),this.historyAutocapture.startIfEnabled(),Te.DEBUG=Te.DEBUG||this.config.debug,Te.DEBUG&&b.info("Starting in debug mode",{this:this,config:t,thisC:y({},this.config),p:o,s:l}),((n=t.bootstrap)==null?void 0:n.distinctID)!==void 0){var u,p,h=this.config.get_device_id(ze()),g=(u=t.bootstrap)!=null&&u.isIdentifiedID?h:t.bootstrap.distinctID;this.persistence.set_property(Ce,(p=t.bootstrap)!=null&&p.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:g})}if(this.As()){var v,_,x=Object.keys(((v=t.bootstrap)==null?void 0:v.featureFlags)||{}).filter(S=>{var I;return!((I=t.bootstrap)==null||(I=I.featureFlags)==null||!I[S])}).reduce((S,I)=>{var N;return S[I]=((N=t.bootstrap)==null||(N=N.featureFlags)==null?void 0:N[I])||!1,S},{}),k=Object.keys(((_=t.bootstrap)==null?void 0:_.featureFlagPayloads)||{}).filter(S=>x[S]).reduce((S,I)=>{var N,M;return(N=t.bootstrap)!=null&&(N=N.featureFlagPayloads)!=null&&N[I]&&(S[I]=(M=t.bootstrap)==null||(M=M.featureFlagPayloads)==null?void 0:M[I]),S},{});this.featureFlags.receivedFeatureFlags({featureFlags:x,featureFlagPayloads:k})}if(c)this.register_once({distinct_id:xt,$device_id:null},"");else if(!this.get_distinct_id()){var $=this.config.get_device_id(ze());this.register_once({distinct_id:$,$device_id:$},""),this.persistence.set_property(Ce,"anonymous")}return O(f,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?gl(this,()=>this.Ds()):this.Ds(),le(this.config._onCapture)&&this.config._onCapture!==Ei&&(b.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",S=>this.config._onCapture(S.event,S))),this.config.ip&&b.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Te(e){var t,s,r,n,a,o,l,c;if(!w||!w.body)return b.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Te(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=j(e.supportedCompression,Me.GZipJS)?Me.GZipJS:j(e.supportedCompression,Me.Base64)?Me.Base64:void 0),(t=e.analytics)!=null&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Is?this.Is:"identified_only"}),(s=this.siteApps)==null||s.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(n=this.autocapture)==null||n.onRemoteConfig(e),(a=this.heatmaps)==null||a.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(o=this.webVitalsAutocapture)==null||o.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ds(){try{this.config.loaded(this)}catch(e){b.critical("`loaded` function failed",e)}this.js(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.Ls()},1),new Zl(this).load(),this.featureFlags.flags()}js(){var e;this.is_capturing()&&this.config.request_batching&&((e=this.Ms)==null||e.enable())}_dom_loaded(){this.is_capturing()&&Ge(this.__request_queue,e=>this.Os(e)),this.__request_queue=[],this.js()}_handle_unload(){var e,t;this.config.request_batching?(this.Ns()&&this.capture("$pageleave"),(e=this.Ms)==null||e.unload(),(t=this.Fs)==null||t.unload()):this.Ns()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Re(e){this.__loaded&&(_a?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=ys(e.url,{ip:this.config.ip?1:0}),e.headers=y({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(t=>{var s,r,n,a=y({},t);a.timeout=a.timeout||6e4,a.url=ys(a.url,{_:new Date().getTime().toString(),ver:Te.LIB_VERSION,compression:a.compression});var o=(s=a.transport)!==null&&s!==void 0?s:"fetch",l=ns.filter(u=>!a.disableTransport||!u.transport||!a.disableTransport.includes(u.transport)),c=(r=(n=pn(l,u=>u.transport===o))==null?void 0:n.method)!==null&&r!==void 0?r:l[0].method;if(!c)throw new Error("No available transport method");c(a)})(y({},e,{callback:t=>{var s,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&((s=(r=this.config).on_request_error)==null||s.call(r,t)),e.callback==null||e.callback(t)}}))))}Os(e){this.Fs?this.Fs.retriableRequest(e):this.Re(e)}_execute_array(e){var t,s=[],r=[],n=[];Ge(e,o=>{o&&(t=o[0],A(t)?n.push(o):le(o)?o.call(this):A(o)&&t==="alias"?s.push(o):A(o)&&t.indexOf("capture")!==-1&&le(this[t])?n.push(o):r.push(o))});var a=function(o,l){Ge(o,function(c){if(A(c[0])){var u=l;F(c,function(p){u=u[p[0]].apply(u,p.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};a(s,this),a(r,this),a(n,this)}As(){var e,t;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((t=this.config.bootstrap)==null?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,s){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Ms){if(this.is_capturing())if(!m(e)&&D(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var n=s!=null&&s.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(n==null||!n.isRateLimited){t!=null&&t.$current_url&&!D(t==null?void 0:t.$current_url)&&(b.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),t==null||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,o=(s==null?void 0:s.timestamp)||a,l=ze(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,t||{},o,l)};n&&(c.properties.$lib_rate_limit_remaining_tokens=n.remainingTokens),s!=null&&s.$set&&(c.$set=s==null?void 0:s.$set);var u,p=this.zs(s==null?void 0:s.$set_once);if(p&&(c.$set_once=p),(c=eo(c,s!=null&&s._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,m(s==null?void 0:s.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=a),e===Vs.DISMISSED||e===Vs.SENT){var h=t==null?void 0:t[Ur.SURVEY_ID],g=t==null?void 0:t[Ur.SURVEY_ITERATION];u={id:h,current_iteration:g},localStorage.getItem(zr(u))||localStorage.setItem(zr(u),"true"),c.$set=y({},c.$set,{[Wl({id:h,current_iteration:g},e===Vs.SENT?"responded":"dismissed")]:!0})}var v=y({},c.properties.$set,c.$set);if(dt(v)||this.setPersonPropertiesForFlags(v),!C(this.config.before_send)){var _=this.Us(c);if(!_)return;c=_}this.xs.emit("eventCaptured",c);var x={method:"POST",url:(r=s==null?void 0:s._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:s==null?void 0:s._batchKey};return!this.config.request_batching||s&&(s==null||!s._batchKey)||s!=null&&s.send_instantly?this.Os(x):this.Ms.enqueue(x),c}b.critical("This capture call is ignored due to client rate limiting.")}}else b.error("No event name provided to posthog.capture")}else b.uninitializedWarning("posthog.capture")}Ke(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,s,r,n){if(s=s||new Date,!this.persistence||!this.sessionPersistence)return t;var a=n?void 0:this.persistence.remove_event_timer(e),o=y({},t);if(o.token=this.config.token,o.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(o.$cookieless_mode=!0),e==="$snapshot"){var l=y({},this.persistence.properties(),this.sessionPersistence.properties());return o.distinct_id=l.distinct_id,(!D(o.distinct_id)&&!V(o.distinct_id)||Zs(o.distinct_id))&&b.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}var c,u=Bl(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:p,windowId:h}=this.sessionManager.checkAndGetSessionAndWindowId(n,s.getTime());o.$session_id=p,o.$window_id=h}this.sessionPropsManager&&H(o,this.sessionPropsManager.getSessionProps());try{var g;this.sessionRecording&&H(o,this.sessionRecording.sdkDebugProperties),o.$sdk_debug_retry_queue_size=(g=this.Fs)==null?void 0:g.length}catch(k){o.$sdk_debug_error_capturing_properties=String(k)}if(this.requestRouter.region===Ot.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||n?e!=="$pageleave"||n?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(s):this.pageViewManager.doPageView(s,r),o=H(o,c),e==="$pageview"&&w&&(o.title=w.title),!m(a)){var v=s.getTime()-a;o.$duration=parseFloat((v/1e3).toFixed(3))}K&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=H({},u,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),A(this.config.property_denylist)?F(this.config.property_denylist,function(k){delete o[k]}):b.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var _=this.config.sanitize_properties;_&&(b.error("sanitize_properties is deprecated. Use before_send instead"),o=_(o,e));var x=this.qs();return o.$process_person_profile=x,x&&!n&&this.Bs("_calculate_event_properties"),o}zs(e){var t;if(!this.persistence||!this.qs()||this.$s)return e;var s=this.persistence.get_initial_props(),r=(t=this.sessionPropsManager)==null?void 0:t.getSetOnceProps(),n=H({},s,r||{},e||{}),a=this.config.sanitize_properties;return a&&(b.error("sanitize_properties is deprecated. Use before_send instead"),n=a(n,"$set_once")),this.$s=!0,dt(n)?void 0:n}register(e,t){var s;(s=this.persistence)==null||s.register(e,t)}register_once(e,t,s){var r;(r=this.persistence)==null||r.register_once(e,t,s)}register_for_session(e){var t;(t=this.sessionPersistence)==null||t.register(e)}unregister(e){var t;(t=this.persistence)==null||t.unregister(e)}unregister_for_session(e){var t;(t=this.sessionPersistence)==null||t.unregister(e)}Hs(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch{return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t,s){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,s)}getEarlyAccessFeatures(e,t,s){return t===void 0&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,s)}on(e,t){return this.xs.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,s;return(t=(s=this.sessionManager)==null?void 0:s.onSessionId(e))!==null&&t!==void 0?t:()=>{}}getSurveys(e,t){t===void 0&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){t===void 0&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){t===void 0&&(t=Yl),this.surveys.displaySurvey(e,t)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return t===void 0&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,s){if(!this.__loaded||!this.persistence)return b.uninitializedWarning("posthog.identify");if(V(e)&&(e=e.toString(),b.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))b.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==xt){if(this.Bs("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var n=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:n},"")}e!==r&&e!==this.get_property(Nt)&&(this.unregister(Nt),this.register({distinct_id:e}));var a=(this.persistence.get_property(Ce)||"anonymous")==="anonymous";e!==r&&a?(this.persistence.set_property(Ce,"identified"),this.setPersonPropertiesForFlags(y({},s||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:s||{}}),this.Ps=Ar(e,t,s),this.featureFlags.setAnonymousDistinctId(r)):(t||s)&&this.setPersonProperties(t,s),e!==r&&(this.reloadFeatureFlags(),this.unregister(cs))}}else b.critical('The string "'+xt+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else b.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.Bs("posthog.setPersonProperties")){var s=Ar(this.get_distinct_id(),e,t);this.Ps!==s?(this.setPersonPropertiesForFlags(y({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Ps=s):b.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,s){if(e&&t){if(this.Bs("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:y({},r,{[e]:t})}),s&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:s}),this.setGroupPropertiesForFlags({[e]:s})),r[e]===t||s||this.reloadFeatureFlags()}}else b.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){t===void 0&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){t===void 0&&(t=!0),this.Bs("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,s,r,n;if(b.info("reset"),!this.__loaded)return b.uninitializedWarning("posthog.reset");var a=this.get_property("$device_id");if(this.consent.reset(),(t=this.persistence)==null||t.clear(),(s=this.sessionPersistence)==null||s.clear(),this.surveys.reset(),this.featureFlags.reset(),(r=this.persistence)==null||r.set_property(Ce,"anonymous"),(n=this.sessionManager)==null||n.resetSessionId(),this.Ps=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:xt,$device_id:null},"");else{var o=this.config.get_device_id(ze());this.register_once({distinct_id:o,$device_id:e?o:a},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return(e=(t=this.sessionManager)==null?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:s}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(e!=null&&e.withTimestamp&&s){var n,a=(n=e.timestampLookBack)!==null&&n!==void 0?n:10;if(!s)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-s)/1e3)-a,0)}return r}alias(e,t){return e===this.get_property(gn)?(b.critical("Attempting to create alias for existing People user - aborting."),-2):this.Bs("posthog.alias")?(m(t)&&(t=this.get_distinct_id()),e!==t?(this.Hs(Nt,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(b.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=y({},this.config);if(L(e)){var s,r,n,a,o;H(this.config,Kr(e));var l=this.Cs();(s=this.persistence)==null||s.update_config(this.config,t,l),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Gs(y({},this.config,{persistence:"sessionStorage"}),l),B.G()&&B.V("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Te.DEBUG=!0,b.info("set_config",{config:e,oldConfig:t,newConfig:y({},this.config)})),(r=this.sessionRecording)==null||r.startIfEnabledOrStop(),(n=this.autocapture)==null||n.startIfEnabled(),(a=this.heatmaps)==null||a.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ws(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop()}}startSessionRecording(e){var t=e===!0,s={sampling:t||!(e==null||!e.sampling),linked_flag:t||!(e==null||!e.linked_flag),url_trigger:t||!(e==null||!e.url_trigger),event_trigger:t||!(e==null||!e.event_trigger)};if(Object.values(s).some(Boolean)){var r,n,a,o,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),s.sampling&&((n=this.sessionRecording)==null||n.overrideSampling()),s.linked_flag&&((a=this.sessionRecording)==null||a.overrideLinkedFlag()),s.url_trigger&&((o=this.sessionRecording)==null||o.overrideTrigger("url")),s.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,t){var s=new Error("PostHog syntheticException");return this.exceptions.sendExceptionEvent(y({},qo((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:s}),t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return(t=this.persistence)==null?void 0:t.props[e]}getSessionProperty(e){var t;return(t=this.sessionPersistence)==null?void 0:t.props[e]}toString(){var e,t=(e=this.config.name)!==null&&e!==void 0?e:ut;return t!==ut&&(t=ut+"."+t),t}_isIdentified(){var e,t;return((e=this.persistence)==null?void 0:e.get_property(Ce))==="identified"||((t=this.sessionPersistence)==null?void 0:t.get_property(Ce))==="identified"}qs(){var e,t;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&dt(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Nt])&&((t=this.persistence)==null||(t=t.props)==null||!t[ds]))}Ns(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.qs()||this.Bs("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Bs(e){return this.config.person_profiles==="never"?(b.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Hs(ds,!0),!0)}Cs(){if(this.config.cookieless_mode==="always")return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||e&&!!t}Ws(){var e,t,s,r,n=this.Cs();return((e=this.persistence)==null?void 0:e.De)!==n&&((s=this.persistence)==null||s.set_disabled(n)),((t=this.sessionPersistence)==null?void 0:t.De)!==n&&((r=this.sessionPersistence)==null||r.set_disabled(n)),n}opt_in_capturing(e){if(this.config.cookieless_mode!=="always"){var t;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),this.sessionManager=new Vr(this),this.persistence&&(this.sessionPropsManager=new Wr(this,this.sessionManager,this.persistence)),this.sessionRecording=new jr(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Ws(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(m(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((t=e==null?void 0:e.captureEventName)!==null&&t!==void 0?t:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Ls()}else b.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Ws(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:xt,$device_id:null}),this.sessionManager=void 0,this.sessionPropsManager=void 0,(e=this.sessionRecording)==null||e.stopRecording(),this.sessionRecording=void 0,this.Ls())):b.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===Fe.GRANTED?"granted":e===Fe.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Ws()}_is_bot(){return re?va(re,this.config.custom_blocked_useragents):void 0}Ls(){w&&(w.visibilityState==="visible"?this.ks||(this.ks=!0,this.capture("$pageview",{title:w.title},{send_instantly:!0}),this.Es&&(w.removeEventListener("visibilitychange",this.Es),this.Es=null)):this.Es||(this.Es=this.Ls.bind(this),O(w,"visibilitychange",this.Es)))}debug(e){e===!1?(f==null||f.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(f==null||f.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}L(){var e,t,s,r,n,a,o,l=this.Rs||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(b.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(s="advanced_disable_decide",r=!1,n=b,a=(t="advanced_disable_flags")in(e=l)&&!m(e[t]),o=s in e&&!m(e[s]),a?e[t]:o?(n&&n.warn("Config field '"+s+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[s]):r)}Us(e){if(C(this.config.before_send))return e;var t=A(this.config.before_send)?this.config.before_send:[this.config.before_send],s=e;for(var r of t){if(s=r(s),C(s)){var n="Event '"+e.event+"' was rejected in beforeSend function";return Xa(e.event)?b.warn(n+". This can cause unexpected behavior."):b.info(n),null}s.properties&&!dt(s.properties)||b.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return s}getPageViewId(){var e;return(e=this.pageViewManager.fe)==null?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,s){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(s)})}}(function(i,e){for(var t=0;t<e.length;t++)i.prototype[e[t]]=Qa(i.prototype[e[t]])})(Is,["identify"]);var Zr,Qr=(Zr=Dt[ut]=new Is,function(){function i(){i.done||(i.done=!0,_a=!1,F(Dt,function(e){e._dom_loaded()}))}w!=null&&w.addEventListener?w.readyState==="complete"?i():O(w,"DOMContentLoaded",i,{capture:!1}):f&&b.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),Zr);const gc="phc_9pKJOHnmXCHE9rIapTSHVuswjpZhYLHSSDHOqQclMtm",fc="https://us.i.posthog.com";let en=!1,tn=!1;function vc(){return typeof window>"u"?null:(en||(Qr.init(gc,{api_host:fc,autocapture:!0,capture_pageview:!1,capture_pageleave:!0,persistence:"localStorage+cookie",session_recording:{maskAllInputs:!0,maskTextSelector:"input, textarea, [data-ph-mask]"},person_profiles:"identified_only"}),en=!0),Qr)}function ma(i){const e=vc();e&&i(e)}function _c(){if(typeof window>"u")return{};const i=new URLSearchParams(window.location.search),e={};["utm_source","utm_medium","utm_campaign","utm_content","utm_term"].forEach(r=>{const n=i.get(r);n&&(e[r]=n)});const t=document.referrer;t&&(e.referrer=t);const s=i.get("source");return s&&(e.outreach_source=s),e}function js(i,e={}){ma(t=>{t.capture(i,e)})}function mc(i={}){tn||ma(e=>{tn=!0;const t=typeof window<"u"?{path:window.location.pathname,hash:window.location.hash||void 0}:{};e.capture("landing_view",{page:"marketing_home",..._c(),...t,...i})})}function sn(i={}){js("demo_start",{page:"marketing_home",surface:"live_demo",...i})}function ts(i,e={}){js("demo_generate",{page:"marketing_home",surface:"live_demo",status:i,...e})}function ct({id:i,label:e,href:t,location:s,extra:r={}}){js("cta_click",{page:"marketing_home",id:i,label:e,href:t,location:s,...r})}function yc({plan:i,interval:e,location:t,extra:s={}}){js("pricing_select",{page:"marketing_home",plan:i,interval:e,location:t,...s})}const Ae=({children:i,className:e="",variant:t="primary",size:s="md",...r})=>{const n="inline-flex items-center justify-center rounded-md border border-white/10 bg-white/10 px-4 py-2 text-sm text-white hover:bg-white/20",a="inline-flex items-center justify-center rounded-md border border-white/10 bg-transparent px-4 py-2 text-sm text-white hover:bg-white/10",o=s==="lg"?"px-5 py-2.5 text-base":"";return d.jsx("button",{...r,className:`${t==="secondary"?a:n} ${o} ${e}`,children:i})},he=({children:i,className:e=""})=>d.jsx("div",{className:`rounded-2xl border border-white/10 bg-white/5 ${e}`,children:i}),pe=({children:i})=>d.jsx("div",{className:"border-b border-white/10 p-4",children:i}),ge=({children:i,className:e=""})=>d.jsx("div",{className:`font-medium ${e}`,children:i}),fe=({children:i,className:e=""})=>d.jsx("div",{className:`p-4 ${e}`,children:i}),ya=({children:i,className:e=""})=>d.jsx("span",{className:`inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/70 ${e}`,children:i}),Pe=({children:i,className:e=""})=>d.jsx("div",{className:`mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8 ${e}`,children:i}),jt=({eyebrow:i,title:e,subtitle:t})=>d.jsxs("div",{className:"mx-auto max-w-3xl text-center",children:[i&&d.jsx("div",{className:"mb-3 inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs uppercase tracking-wide text-white/70",children:d.jsx("span",{children:i})}),d.jsx("h2",{className:"text-3xl font-semibold tracking-tight sm:text-4xl",children:e}),t&&d.jsx("p",{className:"mt-3 text-base text-white/70",children:t})]}),rn=({code:i})=>{const e=async()=>{try{await navigator.clipboard.writeText(i),alert("Snippet copied")}catch{}};return d.jsxs("div",{className:"relative rounded-2xl border border-white/10 bg-black/60 p-4 font-mono text-sm leading-relaxed shadow-xl",children:[d.jsx("pre",{className:"whitespace-pre-wrap break-words text-white/90",children:i}),d.jsx("button",{onClick:e,className:"absolute right-3 top-3 rounded-md border border-white/10 bg-white/10 px-2 py-1 text-xs text-white/80 hover:bg-white/15",children:"Copy"})]})},bc=()=>{const i=ie.useRef(null),[e,t]=ie.useState(""),[s,r]=ie.useState(""),[n,a]=ie.useState(""),[o,l]=ie.useState(50),c=()=>{var h;sn({step:"open_picker"}),(h=i.current)==null||h.click()},u=h=>{var _;const g=(_=h.target.files)==null?void 0:_[0];if(!g)return;t(URL.createObjectURL(g)),r("");const v={step:"file_selected",file_type:g.type||"unknown"};g.size&&(v.file_size_kb=Math.round(g.size/1024)),sn(v)},p=async()=>{var _,x;const h=(x=(_=i.current)==null?void 0:_.files)==null?void 0:x[0];if(!h){a("Please choose an image."),ts("missing_file");return}const g={file_type:h.type||"unknown"};h.size&&(g.file_size_kb=Math.round(h.size/1024)),ts("requested",g),a("Uploading..."),r(""),l(50);const v=new FormData;v.append("image",h),v.append("embedId","demo-dental"),v.append("vertical","dental");try{const k=await fetch("/api/edit",{method:"POST",body:v}),$=await k.json();if(!k.ok)throw new Error($.error||"Failed");a("Rendering complete");const{outputUrl:S,durationMs:I}=$,N=!!S;N?r(S):a("No image returned");const M={has_output:N};typeof I=="number"&&(M.duration_ms=I),ts("success",M)}catch(k){a("Error: "+k.message),ts("error",{message:k.message})}};return d.jsxs("div",{id:"demo",className:"relative grid gap-4 rounded-3xl border border-white/10 bg-gradient-to-b from-white/5 to-transparent p-4 sm:p-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ya,{variant:"secondary",className:"bg-white/10 text-white",children:"Live Demo"}),d.jsx("span",{className:"text-xs text-white/60",children:"Interactive preview"})]}),d.jsx("div",{className:"text-xs text-white/50",children:"Before/After slider"})]}),d.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 shadow-2xl",children:[d.jsxs("div",{className:"relative aspect-[4/3]",children:[d.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-black/60 px-2 py-1 text-xs text-white/80 z-10",children:"After"}),d.jsx("div",{className:"absolute right-4 top-4 rounded-full bg-black/60 px-2 py-1 text-xs text-white/80 z-10",children:"Before"}),e?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:e,alt:"Before",className:"absolute inset-0 h-full w-full object-cover"}),d.jsx("div",{className:"absolute inset-0",style:{clipPath:`inset(0 ${100-o}% 0 0)`},children:s?d.jsx("img",{src:s,alt:"After",className:"h-full w-full object-cover"}):d.jsx("div",{className:"flex h-full w-full items-center justify-center bg-black/30",children:d.jsx(Ua,{className:"h-10 w-10 text-white/40"})})})]}):d.jsx("div",{className:"grid h-full w-full place-items-center bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-white/20 via-white/5 to-transparent",children:d.jsx(an,{className:"h-10 w-10 text-white/30"})}),d.jsx("input",{type:"range",min:"0",max:"100",value:o,onChange:h=>l(Number(h.target.value)),className:"absolute left-3 right-3 bottom-3"})]}),d.jsx("div",{className:"border-t border-white/10 bg-black/40 p-3 text-center text-sm text-white/70",children:"Upload a photo, click Generate, slide to compare"})]}),d.jsxs("div",{className:"grid gap-2 sm:flex sm:items-center sm:justify-between",children:[d.jsx("div",{className:"text-xs text-white/60",children:n||"Powered by fal.ai image edit model"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:u,className:"hidden"}),d.jsx(Ae,{variant:"secondary",className:"bg-white/10 text-white hover:bg-white/20",onClick:c,children:"Choose image"}),d.jsxs(Ae,{className:"gap-2",onClick:p,children:["Generate ",d.jsx(ss,{className:"h-4 w-4"})]})]})]})]})};function wc(){const[i,e]=ie.useState(()=>{try{return localStorage.getItem("lang")||"en"}catch{return"en"}});ie.useEffect(()=>{mc()},[]),ie.useEffect(()=>{try{localStorage.setItem("lang",i)}catch{}},[i]);const t=(r,n)=>i==="bg"?n:r,s=`<script async src="https://before-after-embed.vercel.app/embed.js"
  data-embed-id="your-embed-id"
  data-theme="dark"
  data-variant="compact"
  data-max-width="640px"
  data-align="center"
  data-radius="14px"
  data-shadow="true"
  data-border="true"
  data-width="100%" data-height="460px"><\/script>`;return d.jsxs("div",{className:"min-h-screen overflow-x-hidden bg-neutral-950 text-white",children:[d.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-neutral-950/80 backdrop-blur",children:d.jsxs(Pe,{className:"flex h-14 items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-xl bg-gradient-to-tr from-violet-500 via-pink-500 to-cyan-400 shadow-lg shadow-violet-500/20",children:d.jsx("span",{className:"text-xs font-bold",children:"B/A"})}),d.jsx("span",{className:"text-sm font-semibold tracking-wide",children:"Before/After"})]}),d.jsxs("nav",{className:"hidden items-center gap-6 text-sm text-white/80 md:flex",children:[d.jsx("a",{href:"#demo",className:"hover:text-white",children:t("Live demo","  ")}),d.jsx("a",{href:"#features",className:"hover:text-white",children:t("Features","")}),d.jsx("a",{href:"/app/docs.html",target:"_top",className:"hover:text-white",children:t("Docs","")}),d.jsx("a",{href:"#pricing",className:"hover:text-white",children:t("Pricing","")}),d.jsx("a",{href:"/client.html",target:"_top",className:"hover:text-white",children:t("Client Portal","  ")})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("a",{href:"/client.html",target:"_top",children:d.jsx(Ae,{variant:"secondary",className:"hidden bg-white/10 text-white hover:bg-white/20 sm:inline-flex",onClick:()=>ct({id:"header_client_portal",label:"Client Portal",href:"/client.html",location:"header",extra:{lang:i}}),children:t("Client Portal","  ")})}),d.jsx("a",{href:"#demo",children:d.jsxs(Ae,{className:"gap-2",onClick:()=>ct({id:"header_demo",label:"Try demo",href:"#demo",location:"header",extra:{lang:i}}),children:[t("Try the demo"," ")," ",d.jsx(ss,{className:"h-4 w-4"})]})}),d.jsxs("div",{className:"inline-flex items-center rounded-md border border-white/20 bg-white/5 p-0.5",children:[d.jsx("button",{onClick:()=>e("en"),className:`${i==="en"?"bg-white/20 text-white":"text-white/80"} rounded px-2 py-1 text-xs`,children:"EN"}),d.jsx("button",{onClick:()=>e("bg"),className:`${i==="bg"?"bg-white/20 text-white":"text-white/80"} rounded px-2 py-1 text-xs`,children:"BG"})]})]})]})}),d.jsxs("section",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 -z-10 bg-[radial-gradient(ellipse_at_top,_rgba(139,92,246,0.25),_transparent_60%),radial-gradient(ellipse_at_bottom,_rgba(34,211,238,0.15),_transparent_60%)]"}),d.jsxs(Pe,{className:"py-16 sm:py-24",children:[d.jsxs("div",{className:"mx-auto max-w-3xl text-center",children:[d.jsx("h1",{className:"text-4xl font-semibold tracking-tight sm:text-6xl",children:t("Let customers visualize results before they buy","      ")}),d.jsx("p",{className:"mt-4 text-lg text-white/70",children:t("Embed a beautiful, oneclick AI visualizer on any website. Perfect for barbers, dental clinics, car detailing and more. Upload a photo, click Generate, slide to compare.","  AI       .   ,  ,    .  ,      .")}),d.jsxs("div",{className:"mt-8 flex flex-col items-center justify-center gap-3 sm:flex-row",children:[d.jsx("a",{href:"#demo",children:d.jsxs(Ae,{size:"lg",className:"gap-2",onClick:()=>ct({id:"hero_demo",label:"Try live demo",href:"#demo",location:"hero",extra:{lang:i}}),children:[t("Try the Live Demo","   ")," ",d.jsx(ss,{className:"h-5 w-5"})]})}),d.jsx("a",{href:"/client.html",target:"_top",children:d.jsx(Ae,{size:"lg",variant:"secondary",className:"bg-white/10 text-white hover:bg-white/20",onClick:()=>ct({id:"hero_client_portal",label:"Client Portal",href:"/client.html",location:"hero",extra:{lang:i}}),children:t("Client Portal","  ")})})]})]}),d.jsx("div",{className:"mt-12",children:d.jsx(bc,{})})]})]}),d.jsx("section",{id:"features",className:"border-t border-white/10 py-16 sm:py-24",children:d.jsxs(Pe,{children:[d.jsx(jt,{eyebrow:t("Product",""),title:t("Dropin embed. Modern UI. Multitenant by design."," widget.  UI.   ."),subtitle:t("Paste one script tag. Configure layout with dataattributes. Provision embeds per client, manage themes and verticals, and track usage  all with a clean, conversionready UI.","  .   data.     ,          ,  .")}),d.jsxs("div",{className:"mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t("Dropin embed"," embed"),d.jsx(Aa,{className:"h-5 w-5 text-white/60"})]})}),d.jsx(fe,{className:"text-sm text-white/70",children:t("Paste one script tag. Configure layout (max width, alignment, theme) with dataattributes.","  .  ,     data.")})]}),d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t("Multitenant",""),d.jsx(Da,{className:"h-5 w-5 text-white/60"})]})}),d.jsx(fe,{className:"text-sm text-white/70",children:t("Provision embeds per client, manage themes/verticals, and track usage.","   ,  /   .")})]}),d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t("Modern UI"," UI"),d.jsx(zi,{className:"h-5 w-5 text-white/60"})]})}),d.jsx(fe,{className:"text-sm text-white/70",children:t("Clean dropzone, compact or card variants, Before/After badges and slider.","   ,   card ,  Before/After  .")})]}),d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t("Fast integration"," "),d.jsx(Ma,{className:"h-5 w-5 text-white/60"})]})}),d.jsx(fe,{className:"text-sm text-white/70",children:t("Get started in 60 seconds. Works anywhere you can paste a script tag.","  60 .  ,     .")})]}),d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t("Safe by default","  "),d.jsx(Gi,{className:"h-5 w-5 text-white/60"})]})}),d.jsx(fe,{className:"text-sm text-white/70",children:t("Clientscoped API keys, signed uploads, and pertenant quotas."," API ,      enant.")})]}),d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[t("Developerfriendly","  "),d.jsx(Ga,{className:"h-5 w-5 text-white/60"})]})}),d.jsx(fe,{className:"text-sm text-white/70",children:t("Webhooks for generations, admin API, and audit logs.","Webhooks  , admin API  .")})]})]})]})}),d.jsx("section",{id:"docs",className:"border-t border-white/10 py-16 sm:py-24",children:d.jsx(Pe,{children:d.jsxs("div",{className:"grid items-center gap-8 rounded-3xl border border-white/10 bg-gradient-to-r from-violet-600/20 via-pink-500/20 to-cyan-400/20 p-8 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-semibold",children:"Get started in 60 seconds"}),d.jsx("p",{className:"mt-2 text-white/80",children:"Paste the script tag, set your dataattributes, and launch your visualizer today."}),d.jsxs("div",{className:"mt-6 flex gap-3",children:[d.jsxs(Ae,{className:"gap-2",onClick:()=>ct({id:"docs_create_account",label:"Create account",href:"/client.html",location:"docs_cta",extra:{lang:i}}),children:["Create account ",d.jsx(ss,{className:"h-4 w-4"})]}),d.jsx(Ae,{variant:"secondary",className:"bg-white/10 text-white hover:bg-white/20",onClick:()=>ct({id:"docs_talk_sales",label:"Talk to sales",href:"mailto:team@beforeafter.app",location:"docs_cta",extra:{lang:i}}),children:"Talk to sales"})]})]}),d.jsx("div",{children:d.jsx(rn,{code:s})})]})})}),d.jsx("section",{className:"border-t border-white/10 py-16 sm:py-24",children:d.jsxs(Pe,{children:[d.jsx(jt,{eyebrow:t("Use cases",""),title:t("Built for barbers, dental clinics, car detailing and more","  ,  ,    ."),subtitle:t("Show the transformation. Remove buyer hesitation. Convert with proof in one click."," .  .      .")}),d.jsx("div",{className:"mt-10 grid gap-6 md:grid-cols-3",children:[{title:t("Barbers & salons","  "),desc:t("Preview haircuts, color, or beard styling before the chair."," ,     ."),icon:d.jsx(zi,{className:"h-5 w-5"}),link:"/app/barber.html"},{title:t("Dental clinics"," "),desc:t("Project whitening, veneers, or aligner results from a selfie."," ,     ."),icon:d.jsx(Gi,{className:"h-5 w-5"}),link:"/app/dental.html"},{title:t("Car detailing"," "),desc:t("Visualize paint correction, wrap colors, and ceramic coatings.","   ,    ."),icon:d.jsx(an,{className:"h-5 w-5"}),link:"/app/detailing.html"}].map((r,n)=>r.link?d.jsx("a",{href:r.link,className:"block transition hover:scale-[1.01]",target:"_top",children:d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[r.icon," ",r.title]})}),d.jsx(fe,{className:"text-sm text-white/70",children:r.desc})]})},n):d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsxs(ge,{className:"flex items-center gap-2 text-base",children:[r.icon," ",r.title]})}),d.jsx(fe,{className:"text-sm text-white/70",children:r.desc})]},n))})]})}),d.jsx("section",{id:"pricing",className:"border-t border-white/10 py-16 sm:py-24",children:d.jsxs(Pe,{children:[d.jsx(jt,{eyebrow:t("Pricing",""),title:t("Clear, adoptionfirst plans","     "),subtitle:t("All paid tiers include overage: $10 per extra 100 generations.","    : $10    100 .")}),d.jsx("div",{className:"mt-10 grid gap-6 md:grid-cols-4",children:[{slug:"free",name:t("Free",""),price:"$0",badge:t("Test Drive"," "),popular:!1,includes:t("10 generations / mo","10  / "),bullets:[t("1 embed","1 "),t("Watermark required","  "),t("Basic light/dark theme"," / ")],footnote:t("For trials; limited usage"," ;  ")},{slug:"starter",name:t("Starter",""),price:"$24",badge:null,popular:!1,includes:t("300 generations / mo","300  / "),bullets:[t("1 embed","1 "),t("Basic light/dark theme"," / "),t("Watermark removed","  ")],footnote:t("+ $10 per 100 extra gens","+ $10   . 100 ")},{slug:"growth",name:t("Growth",""),price:"$49",badge:t("Most Popular",""),popular:!0,includes:t("600 generations / mo","600  / "),bullets:[t("Up to 3 embeds"," 3 "),t("Customizable theme"," "),t("Remove watermark","  "),t("Basic analytics"," ")],footnote:t("+ $10 per 100 extra gens","+ $10   . 100 ")},{slug:"pro",name:t("Pro",""),price:"$99",badge:null,popular:!1,includes:t("1,500 generations / mo","1,500  / "),bullets:[t("Up to 10 embeds"," 10 "),t("Advanced analytics"," "),t("API + Webhooks","API + "),t("Priority support"," ")],footnote:t("+ $10 per 100 extra gens","+ $10   . 100 ")}].map((r,n)=>d.jsxs(he,{className:`relative border-white/10 ${r.popular?"bg-gradient-to-b from-white/10 to-white/5 ring-1 ring-white/10":"bg-white/5"}`,children:[d.jsx(pe,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx(ge,{className:"text-base",children:r.name}),r.badge&&d.jsx(ya,{className:"border-amber-300/40 text-amber-300",children:r.badge})]})}),d.jsxs(fe,{children:[d.jsxs("div",{className:"text-3xl font-semibold",children:[r.price,d.jsx("span",{className:"text-sm text-white/60",children:"/mo"})]}),d.jsxs("div",{className:"mt-1 text-sm text-emerald-300",children:[t("Includes",".")," ",r.includes]}),d.jsx("ul",{className:"mt-4 space-y-2 text-sm text-white/80",children:r.bullets.map((a,o)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx(wt,{className:"mt-0.5 h-4 w-4 text-emerald-400"})," ",a]},o))}),d.jsx("div",{className:"mt-4 text-xs text-white/60",children:r.footnote}),d.jsx("a",{href:"/client.html",target:"_top",children:d.jsxs(Ae,{className:"mt-6 w-full",onClick:()=>yc({plan:r.slug,interval:"monthly",location:"pricing_grid",extra:{lang:i}}),children:[t("Choose","")," ",r.name]})})]})]},n))})]})}),d.jsx("section",{className:"border-t border-white/10 py-16 sm:py-24",children:d.jsxs(Pe,{children:[d.jsx(jt,{eyebrow:t("FAQ",""),title:t("Answers to common questions","    ")}),d.jsx("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[{q:t("How does the embed work?","  embed?"),a:t("You paste a single script tag. We render an upload, generation, and before/after slider UI that calls your tenantscoped backend via signed URLs.","  script .  ,    /,       URL.")},{q:t("Is my data secure?","    ?"),a:t("Yes. Each tenant has isolated credentials and quotas. Images are processed with temporary signed URLs and never shared across tenants.",".       .       URL      .")},{q:t("Can I customize the UI?","    UI?"),a:t("Use dataattributes for quick theming (width, radius, theme, variant). For full control, use our Admin API or CSS variables."," data    (, , , ).     Admin API  CSS .")},{q:t("What model powers this?","  ?"),a:t("We use Gemini Nano Banana image edit model for fast, ondevicestyle edits delivered from managed infra.","  Gemini Nano Banana      ondevice,    .")}].map((r,n)=>d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsx(ge,{className:"text-base",children:r.q})}),d.jsx(fe,{className:"text-sm text-white/70",children:r.a})]},n))})]})}),d.jsx("section",{id:"get-started",className:"border-t border-white/10 py-16 sm:py-24",children:d.jsxs(Pe,{children:[d.jsx(jt,{eyebrow:t("Get started in 60 seconds","  60 "),title:t("Install the embed"," "),subtitle:t("Paste the snippet below, replace the embed id, and youre live. Configure lookandfeel with dataattributes  no extra JS required.","  ,  embed id   .    data    JS.")}),d.jsxs("div",{className:"mt-8 grid gap-6 lg:grid-cols-2",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx(rn,{code:s}),d.jsxs("div",{className:"text-xs text-white/60",children:[t("Example settings:"," :")," ",d.jsx("code",{children:'data-theme=\\"dark\\"'}),", ",d.jsx("code",{children:'data-variant=\\"compact\\"'}),", ",d.jsx("code",{children:"data-max-width"}),", ",d.jsx("code",{children:"data-align"}),", ",d.jsx("code",{children:"data-radius"}),", ",d.jsx("code",{children:"data-shadow"}),", ",d.jsx("code",{children:"data-border"}),"."]})]}),d.jsxs(he,{className:"border-white/10 bg-white/5",children:[d.jsx(pe,{children:d.jsx(ge,{className:"text-base",children:t("What youll get"," ")})}),d.jsxs(fe,{className:"grid gap-3 text-sm text-white/70",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(wt,{className:"mt-0.5 h-4 w-4 text-emerald-400"})," ",t("A polished dropzone with upload + generate","     ")]}),d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(wt,{className:"mt-0.5 h-4 w-4 text-emerald-400"})," ",t("A responsive before/after slider with badges","  /  ")]}),d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(wt,{className:"mt-0.5 h-4 w-4 text-emerald-400"})," ",t("Oneline install; all styling via attributes","   ;   ")]}),d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(wt,{className:"mt-0.5 h-4 w-4 text-emerald-400"})," ",t("Pertenant analytics in the Client Portal","    ")]})]})]})]})]})}),d.jsx("footer",{className:"border-t border-white/10 py-10",children:d.jsx(Pe,{children:d.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-xl bg-gradient-to-tr from-violet-500 via-pink-500 to-cyan-400",children:d.jsx("span",{className:"text-xs font-bold",children:"B/A"})}),d.jsx("div",{className:"text-sm text-white/70",children:" 2025 Before/After Embed"})]}),d.jsxs("div",{className:"flex items-center gap-6 text-sm text-white/70",children:[d.jsx("a",{href:"#",className:"hover:text-white",children:"Status"}),d.jsx("a",{href:"/app/docs.html",target:"_top",className:"hover:text-white",children:"Docs"}),d.jsx("a",{href:"#",className:"hover:text-white",children:"Security"}),d.jsx("a",{href:"/app/terms.html",className:"hover:text-white",children:"Terms"}),d.jsx("a",{href:"/app/privacy.html",className:"hover:text-white",children:"Privacy"})]})]})})})]})}Ea.createRoot(document.getElementById("root")).render(d.jsx(Sa.StrictMode,{children:d.jsx(wc,{})}));
